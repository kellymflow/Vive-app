<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MBTI ì†Œê°œíŒ… ê²Œì„ â€” ëŸ°ì²˜/ëŒ€í™” íŒì—… í†µí•© ë¹Œë“œ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet"/>
  <meta name="mobile-web-app-capable" content="yes"/>
  <style>
    :root{ --pink-50:#fff1f5; --pink-100:#ffe4ec; --pink-200:#ffc9da; --pink-300:#ffabc7; --pink-400:#ff8fb5; --pink-500:#ff6a9a; --pink-600:#e45487; --pink-700:#c24373; }
    html,body{height:100%}
    body{font-family:'Noto Sans KR',sans-serif; background: radial-gradient(1200px 600px at 50% -10%, var(--pink-100), transparent), linear-gradient(180deg, var(--pink-50), #fff);}    
    .soft-card{ background:#fff; border:1px solid #f3e5ea; border-radius:1.25rem; box-shadow:0 12px 30px rgba(255,106,154,0.08);}  
    .chip{ background: var(--pink-100); color:#b4235b; }
    .btn-pink{ background: var(--pink-500); color:#fff; }
    .btn-pink:hover{ background: var(--pink-600);} 
    .dialogue-bubble{ position:relative; background:#fff; border:1px solid #f3e5ea; border-radius:.9rem; padding:1rem 1.1rem; max-width:80%; align-self:flex-start; }
    #effects-layer{ position:absolute; inset:0; pointer-events:none; overflow:hidden; }
    .badge{ font-variant-numeric: tabular-nums; }
    /* ì§„í–‰ íŒŒí‹°í´ */
    .particle{ position:absolute; width:18px; height:18px; opacity:0; will-change: transform, opacity; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.15));}
    .particle.pos{ animation: rise .9s ease-out forwards; }
    .particle.neg{ animation: fall .9s cubic-bezier(.2,.8,.2,1) forwards; }
    @keyframes rise{ 0%{opacity:0; transform: translate(var(--x,0), var(--y,0)) scale(.6);} 15%{opacity:1;} 100%{opacity:0; transform: translate(calc(var(--x)*1.4), calc(var(--y) - 90px)) scale(1.05);} }
    @keyframes fall{ 0%{opacity:0; transform: translate(var(--x,0), var(--y,0)) scale(.9);} 10%{opacity:1;} 100%{opacity:0; transform: translate(calc(var(--x)*1.2), calc(var(--y) + 100px)); } }
    /* ê²°ë§ ì „ìš© */
    #final-layer{ position:fixed; inset:0; pointer-events:none; z-index:70; overflow:hidden; }
    .celebration{ position:fixed; inset:0; pointer-events:none; }
    .celebration .burst{ position:absolute; font-size:28px; animation: pop2 1.2s ease-out forwards; }
    @keyframes pop2{ 0%{ transform: scale(.6); opacity:0;} 20%{opacity:1;} 100%{ transform: scale(1.35) translateY(-10px); opacity:0;} }
    /* í† ìŠ¤íŠ¸ í•˜ë‹¨ ê³ ì • */
    #toast{ position:fixed; left:50%; transform:translateX(-50%); bottom:20px; display:flex; flex-direction:column; align-items:center; pointer-events:none; z-index:80; }
    .toast-item{ padding:.7rem 1.05rem; border-radius:9999px; color:#fff; font-weight:800; box-shadow:0 8px 24px rgba(0,0,0,.12); opacity:0; transform:translateY(10px); transition:all .25s ease; font-size:15px; letter-spacing:.2px; margin-top:.35rem; }
    .toast-item.show{ opacity:1; transform:translateY(0);} 
    /* ë‹µë³€ íŒì—… (NPC ì‘ë‹µ ì „ìš©) */
    #reply-pop{ position:fixed; left:50%; top:50%; transform:translate(-50%,-50%); z-index:85; pointer-events:none; }
    .reply-card{ background:#fff; border:1px solid #f3e5ea; border-radius:1rem; padding:.9rem 1.1rem; box-shadow:0 12px 30px rgba(0,0,0,.12); max-width:90vw; width:22rem; opacity:0; transform:translateY(8px); transition: all .22s ease; text-align:center; }
    .reply-card.show{ opacity:1; transform:translateY(0); }
  </style>
</head>
<body class="min-h-screen p-4">
<div id="toast"></div>
<div id="reply-pop"></div>
<div id="final-layer"></div>

<!-- ëŸ°ì²˜ -->
<section id="launcher" class="max-w-md mx-auto space-y-5">
  <header class="text-center space-y-3">
    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full chip text-sm font-bold">ì†Œê°œíŒ… ì‹œë®¬ë ˆì´í„°</div>
    <h1 class="text-3xl font-extrabold text-[#c24373] tracking-tight">ì˜¤ëŠ˜ì€ ëˆ„êµ¬ë‘ ì„¤ë ˆë³¼ê¹Œìš”?</h1>
    <p class="text-gray-600">ì›í•˜ëŠ” MBTIë¥¼ ê³ ë¥´ê³  ì‹œì‘í•˜ì„¸ìš”.</p>
  </header>
  <div class="soft-card p-4 space-y-4">
    <div class="grid grid-cols-4 gap-2" id="row1"></div>
    <div class="grid grid-cols-4 gap-2" id="row2"></div>
    <button id="randomBtn" type="button" class="w-full btn-pink font-bold py-3 rounded-xl">ëœë¤ ë§¤ì¹­</button>
  </div>
</section>

<!-- ê²Œì„ ì»¨í…Œì´ë„ˆ -->
<section id="game-root" class="hidden max-w-md mx-auto mt-5">
  <div id="game-container" class="relative soft-card p-6 space-y-5">
    <div class="flex items-center justify-between">
      <button id="backBtn" class="text-sm text-[#c24373] hover:underline" type="button">â† MBTI ì„ íƒìœ¼ë¡œ</button>
      <div class="text-right"><span id="target-chip" class="inline-flex items-center text-xs font-bold px-2 py-1 rounded-full chip"></span></div>
    </div>

    <div id="effects-layer"></div>

    <div class="space-y-2">
      <div class="flex justify-between items-center"><span class="text-sm font-bold text-gray-600">í˜„ì¬ ì—ë„ˆì§€</span><span id="score-text" class="text-lg font-bold text-[#e45487]">100 / 200</span></div>
      <div class="w-full bg-pink-100 rounded-full h-3"><div id="score-bar-inner" class="h-3 rounded-full" style="width: 50%; background: linear-gradient(90deg, var(--pink-300), var(--pink-500));"></div></div>
      <div class="flex justify-between items-center"><div class="flex items-center gap-2"><span class="text-sm text-gray-600">ì‹¤ìˆ˜</span><span id="strike-badge" class="badge text-xs px-2 py-1 rounded-full bg-pink-50 border">0 / 3</span></div><div class="text-sm text-gray-500"><span id="progress-text">1 / 5</span></div></div>
    </div>

    <div id="dialogue-area" class="space-y-3 min-h-[120px] max-h-[220px] flex flex-col overflow-hidden"></div>
    <div id="options-area" class="space-y-3"></div>

    <div id="result-modal" class="hidden fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50">
      <div class="soft-card p-8 text-center space-y-4 max-w-sm w-full">
        <div id="result-icon"></div>
        <h2 id="result-title" class="text-3xl font-bold"></h2>
        <p id="result-message" class="text-gray-700 whitespace-pre-line"></p>
        <p id="result-score" class="text-xl font-bold"></p>
        <button id="restartBtn" class="w-full btn-pink font-bold py-3 rounded-xl" type="button">ëŸ°ì²˜ë¡œ ëŒì•„ê°€ê¸°</button>
      </div>
    </div>
  </div>
</section> 
  <!-- ì½”ë“œíœ JS íŒ¨ë„ ë‚´ìš© -->
  <script>
    'use strict';

/* ========== ì „ì—­ ìƒíƒœ/DOM (initì—ì„œ ì—°ê²°) ========== */
const MBTIS = ["ENFP","ENFJ","ENTP","ENTJ","ESFP","ESFJ","ESTP","ESTJ","INFP","INFJ","INTP","INTJ","ISFP","ISFJ","ISTP","ISTJ"];
let targetMbti = null; 
let score = 100, currentRound = 0, strikes = 0, gameActive = true; 
const maxStrikes = 3; 
let chosenMbti = []; 
let sparkStreak = 0, lastTag = null, keyBuff = false;

// DOM refs (initì—ì„œ ì„¸íŒ…)
let launcher,row1,row2,randomBtn,gameRoot,backBtn,restartBtn,targetChip,dialogueArea,optionsArea,scoreText,scoreBarInner,resultModal,strikeBadge,progressText,effectsLayer,finalLayer,toast,replyPop;

/* ========== ëŸ°ì²˜ ========== */
function addBtn(type, row){
  const b = document.createElement('button');
  b.type = 'button';
  b.className = 'w-full bg-white border border-pink-200 rounded-xl py-3 px-2 hover:border-pink-400 hover:bg-pink-50 text-[#c24373] font-bold';
  b.textContent = 'ğŸ’Œ ' + type;
  b.onclick = () => selectTarget(type);
  row.appendChild(b);
}
function buildLauncher(){
  if(row1 && !row1.childElementCount) MBTIS.slice(0,8).forEach(t=>addBtn(t,row1));
  if(row2 && !row2.childElementCount) MBTIS.slice(8).forEach(t=>addBtn(t,row2));
  if(randomBtn && !randomBtn.__bound){ 
    randomBtn.onclick = () => selectTarget(MBTIS[Math.floor(Math.random()*MBTIS.length)]);
    randomBtn.__bound = true;
  }
}
function selectTarget(type){
  targetMbti = type;
  targetChip.innerHTML = `ìƒëŒ€ MBTI: <b>${type}</b>`;
  resetAll();
  launcher.classList.add('hidden');
  gameRoot.classList.remove('hidden');

  // ì˜¤ë””ì˜¤ í•´ì œ ì•ˆì „ë§
  if(!AudioKit.unlocked){ AudioKit.resume(); AudioKit.prime(); }

  // ëª¨ë°”ì¼ ì˜¤ë””ì˜¤ í•´ì œ(ì•ˆì „ë§)
  if(!AudioKit.unlocked){
    try { AudioKit.resume(); AudioKit.prime(); } catch(_) {}
  }

  startGame();
}

/* ========== ì§ˆë¬¸/ì˜µì…˜(ìš”ì•½) ========== */
const QUESTIONS = {
  ENFP:["ì•ˆë…•! ì˜¤ëŠ˜ ëŠë‚Œ ì¢‹ì•„ìš”. ìš”ì¦˜ ê°‘ìê¸° ê½‚íŒ ê±° ìˆì–´ìš”?","ì–´ìƒ‰í•¨ ê¹¨ëŠ” ë‹¹ì‹ ë§Œì˜ ê¿€íŒ ìˆì–´ìš”?","ì½”ìŠ¤ëŠ” ë°˜ ê³„íš ë°˜ ì¦‰í¥, ì–´ë•Œìš”?","ì§€ê¸ˆ ë¶„ìœ„ê¸°ì— ì–´ìš¸ë¦¬ëŠ” ë…¸ë˜ëŠ”ìš”?","ì˜¤ëŠ˜ í•œ ì¤„ë¡œ ì •ë¦¬í•˜ìë©´ìš”?"],
  ENFJ:["ë°˜ê°€ì›Œìš”! í…ì…˜ ë§ì¶”ë ¤ë©´ ì œê°€ ë­˜ í•˜ë©´ ì¢‹ì„ê¹Œìš”?","ë§ˆìŒì„ ì—¬ëŠ” ì§ˆë¬¸, ì–´ë–¤ ê²Œ ì˜ ë§ì•„ìš”?","ë¦¬ë“œ vs ì¡°ìœ¨, ì˜¤ëŠ˜ì€ ë­ê°€ í¸í•´ìš”?","ëŒ€í™”ì— ì˜¨ê¸° ì˜¬ë¦¬ëŠ” ìŒì•… ì·¨í–¥ì€ìš”?","ì˜¤ëŠ˜ í•¨ê»˜í•´ì„œ ì¢‹ì•˜ë˜ í¬ì¸íŠ¸ í•œ ì¤„?"],
  ENTP:["ë°”ë¡œ í•œ íŒ ë¶™ì–´ë³¼ê¹Œìš”? ìµœê·¼ì— ìƒê° ë°”ë€ ì£¼ì œ ìˆì–´ìš”?","ì§€ê¸ˆ ì‘ì€ ì‹¤í—˜ í•œë‹¤ë©´ ë­˜ í•´ë³¼ë˜ìš”?","ë£° ì„¸ìš°ê³  ê¹¨ê¸° vs ë°”ë¡œ í”¼ë²—, ì˜¤ëŠ˜ì€?","ì•„ì´ë””ì–´ ìŠ¤íŒŒí¬ ì˜¬ë¼ì˜¤ëŠ” ì‚¬ìš´ë“œëŠ”ìš”?","ì˜¤ëŠ˜ ì¸ì‚¬ì´íŠ¸ë¥¼ í•œ ì¤„ íŠ¸ìœ—ìœ¼ë¡œ?"],
  ENTJ:["ì‹œê°„ ì•„ë‚ì‹œë‹¤. ì˜¤ëŠ˜ ë”± í•˜ë‚˜ ëª©í‘œ ì¡ëŠ”ë‹¤ë©´ìš”?","ì´ˆë°˜ 10ë¶„, ë¶„ìœ„ê¸° ì¥ì•… í”Œëœì€ìš”?","ë¹ ë¥¸ ê²°ì • vs ì—¬ìœ  íƒìƒ‰, ì–´ë””ì— íˆ¬ìí•´ìš”?","ì§‘ì¤‘ ì˜¬ë¼ê°€ëŠ” ìŒì•… íƒ€ì…ì€ìš”?","ì˜¤ëŠ˜ì˜ ì„±ê³¼ë¥¼ í•œ ë¬¸ì¥ìœ¼ë¡œìš”?"],
  ESFP:["ë¶„ìœ„ê¸° ì¢‹ë‹¤! ì§€ê¸ˆ ë‹¹ì¥ ì¬ë°ŒëŠ” ê±° ë­ ë³´ì—¬ìš”?","ì–¼ìŒ ê¹¨ëŠ” ì²« ë©˜íŠ¸, ë³¸íˆ¬ë¹„ ìˆì£ ?","ê±·ë‹¤ê°€ ëŒë¦¬ë©´ ë°”ë¡œ ë©ˆì¶”ê¸°, ê´œì°®ì£ ?","ëª¸ì´ ë¨¼ì € ë°˜ì‘í•˜ëŠ” ë…¸ë˜ í•˜ë‚˜!","ì˜¤ëŠ˜ ë² ìŠ¤íŠ¸ ì»· ìë§‰ ë­ë¡œ í• ê¹Œìš”?"],
  ESFJ:["ìë¦¬ í¸í•˜ì£ ? ë” í¸í•´ì§€ê²Œ ì œê°€ ë­˜ í•˜ë©´ ì¢‹ì„ê¹Œìš”?","ì²« ë§Œë‚¨ì—ì„œ ë”°ëœ»í•´ì§€ëŠ” í¬ì¸íŠ¸, ë­ê°€ ìˆë‚˜ìš”?","ë‘˜ ë‹¤ ë¬´ë¦¬ ì—†ëŠ” íƒ€ì´ë°ìœ¼ë¡œ ì½”ìŠ¤ ë§ì¶œê¹Œìš”?","ëŒ€í™”ì— ì˜ ê¹”ë¦¬ëŠ” ë°°ê²½ìŒ ì·¨í–¥ì€ìš”?","ì˜¤ëŠ˜ì˜ ê°ì‚¬ í•œ ì¤„, ë‚¨ê²¨ë³¼ê¹Œìš”?"],
  ESTP:["ì•¡ì…˜ìœ¼ë¡œ ê°€ì£ . ê·¼ì²˜ì— ì‘ì€ ëª¨í—˜ í•˜ë‚˜?","ì–´ìƒ‰í•¨ ë¹¨ë¦¬ í‘¸ëŠ” ì¹˜íŠ¸í‚¤ ë­ ì¨ìš”?","íš¨ìœ¨ vs ìš°ì—° ë£¨íŠ¸, ì˜¤ëŠ˜ì€ ì–´ë””ì— ë² íŒ…?","ì•„ë“œë ˆë‚ ë¦° ì˜¬ë¼ê°€ëŠ” ì²« íŠ¸ë™ì€ìš”?","ì˜¤ëŠ˜ í•˜ì´ë¼ì´íŠ¸, ì§§ê²Œ ì½œì•„ì›ƒ!"],
  ESTJ:["ì¢‹ì€ ë§Œë‚¨, ê·œì¹™ í•˜ë‚˜ë¶€í„° í•©ì˜í• ê¹Œìš”?","ì„œë¡œ ì‹œê°„ ì•„ë¼ëŠ” ëŒ€í™” ìš´ì˜ ë°©ì‹ì€ìš”?","ì •ì‹œ ì´ë™ vs ì—¬ìœ  íƒìƒ‰, ì˜¤ëŠ˜ì€ìš”?","ì§‘ì¤‘ ê¹¨ì§€ì§€ ì•ŠëŠ” ìŒì•…ì´ë©´ ì¢‹ê² ì£ ?","ì˜¤ëŠ˜ íšŒê³ ë¥¼ ê²°ë¡  ì¤‘ì‹¬ìœ¼ë¡œìš”."],
  INFP:["ì‚´ì§ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ. ìš”ì¦˜ ë§ˆìŒ ê±´ë“œë¦° ë¬¸ì¥ ìˆì–´ìš”?","ì²˜ìŒ ë§Œë‚¨ì—ì„œ ì•ˆì „í•¨ì„ ì£¼ëŠ” ë°©ë²•ì€ìš”?","ê±·ë‹¤ê°€ ì‘ì€ ì–˜ê¸° ì£¼ì›Œ ë‹´ëŠ” ë£¨íŠ¸, ì–´ë•Œìš”?","ê°€ì‚¬ ì˜ˆìœ ë…¸ë˜ í•˜ë‚˜ ë“¤ì–´ìš”?","ì˜¤ëŠ˜ì˜ ê°ì •, ì‹œì²˜ëŸ¼ í•œ ì¤„ë¡œìš”."],
  INFJ:["ì°¨ë¶„í•˜ê²Œ ì‹œì‘í•´ìš”. ìµœê·¼ ê¹Šê²Œ ìƒê°í•œ ì£¼ì œëŠ”ìš”?","ëŒ€í™”ì˜ ê¹Šì´ë¥¼ ì—¬ëŠ” ì§ˆë¬¸, ë­ê°€ ì˜ ë§ì•„ìš”?","ì˜ë¯¸ ë‚¨ëŠ” ë™ì„ , ì–´ë–»ê²Œ ì„¤ê³„í•˜ë©´ ì¢‹ì„ê¹Œìš”?","ìƒê° ì •ë¦¬ë˜ëŠ” ìŒì•… ê²°ì€ìš”?","ì˜¤ëŠ˜ì˜ ìš”ì§€, í•œ ë¬¸ì¥ í†µì°°ë¡œìš”."],
  INTP:["í˜¸ê¸°ì‹¬ ì²´í¬ë¶€í„°. ìš”ì¦˜ íŒŒëŠ” ì§ˆë¬¸ì€ìš”?","ì²« ë§Œë‚¨ì— ì‹œí—˜í•´ë³´ê³  ì‹¶ì€ ëŒ€í™” í¬ë§· ìˆì–´ìš”?","ê²½ë¡œ ìµœì í™” vs ì‹¤í—˜ ìš°íšŒ, ë­ê°€ ì¬ë°Œì–´ìš”?","ë°©í•´ ì•ˆ ë˜ëŠ” ë°±ê·¸ë¼ìš´ë“œ ìŠ¤í™ì€ìš”?","ì˜¤ëŠ˜ ê°€ì„¤ê³¼ ê²°ë¡ , ìš”ì•½í•˜ë©´ìš”?"],
  INTJ:["ëŒë ¤ ë§ ì•ˆ í•´ìš”. ì˜¤ëŠ˜ ì˜ë„ í•œ ë¬¸ì¥ìœ¼ë¡œìš”?","ì²«ì¸ìƒì—ì„œ í™•ì¸í•˜ê³  ì‹¶ì€ ë³€ìˆ˜ í•˜ë‚˜?","ëª©í‘œ ì§€í–¥ vs ì—¬ìœ  íƒìƒ‰, ì–´ë””ì— íˆ¬ìí•˜ì£ ?","ì‚¬ê³  íš¨ìœ¨ ì˜¬ë¦¬ëŠ” ìŒì› íƒ€ì…ì€ìš”?","ì˜¤ëŠ˜ ì¸ì‚¬ì´íŠ¸, ì„ ì–¸ë¬¸ì²˜ëŸ¼ ì •ë¦¬!"],
  ISFP:["ëŠë‚Œ ì¢‹ì€ ì¶œë°œ. ì§€ê¸ˆ ì´ ìˆœê°„ ì¢‹ì•„ì§€ëŠ” ìš”ì†Œ í•˜ë‚˜?","í¸ì•ˆí•¨ ì—¬ëŠ” ì²« ë©˜íŠ¸, ë‹¹ì‹  í†¤ì€ìš”?","í’ê²½ ì¢‹ì€ ê¸¸ë¡œ ì‚´ì§ ëŒì•„ê°€ë„ ê´œì°®ì£ ?","ì”ì”í•˜ê³  ìƒ‰ê° ì˜ˆìœ ê³¡ í•˜ë‚˜ ê³¨ë¼ìš”.","ì˜¤ëŠ˜ì˜ ì˜¨ë„, í•œ ì¤„ ê¸°ë¡í•´ìš”."],
  ISFJ:["í¸ì•ˆí•˜ë„¤ìš”. ì¼ì£¼ì¼ ì•ˆì •ì‹œí‚¤ëŠ” ë£¨í‹´ í•˜ë‚˜ ê³µìœ í•´ìš”.","ì²˜ìŒì— ê°€ì¥ í˜ì´ ë˜ëŠ” ë°°ë ¤ëŠ” ë­ì˜€ë‚˜ìš”?","ë¶€ë‹´ ì—†ê³  ì°¨ë¶„í•œ ë£¨íŠ¸ë¡œ ì‹œì‘í•´ë³¼ê¹Œìš”?","ëŒ€í™” ë°©í•´ë˜ì§€ ì•ŠëŠ” ì”ì”í•œ ìŒì•…ì€ìš”?","ì˜¤ëŠ˜ì˜ ê³ ë§ˆì›€, ì§§ê²Œ í•œ ì¤„ë¡œìš”."],
  ISTP:["ì‹¤ìš©ì ìœ¼ë¡œ ê°€ìš”. ìµœê·¼ ì§ì ‘ ê³ ì¹œ ê±° ìˆì–´ìš”?","ì–´ìƒ‰í•¨ ì¤„ì´ëŠ” ë¹ ë¥¸ ì…‹ì—…ì€ìš”?","ëŒë°œì—ë„ ëŒ€ì‘ ê°€ëŠ¥í•œ ë™ì„ , ì–´ë–¤ê°€ìš”?","ê¸°ë¶„ ì •ëˆë˜ëŠ” ë¯¸ë‹ˆë©€ íŠ¸ë™ ì¶”ì²œ ìˆì–´ìš”?","ì˜¤ëŠ˜ í•µì‹¬ë§Œ ê±´ì¡°í•˜ê²Œ í•œ ì¤„!"],
  ISTJ:["ë¨¼ì € ì²´í¬ë¶€í„°. ì˜¤ëŠ˜ ì¼ì • ì—¬ìœ ëŠ”ìš”?","ì²« ëŒ€í™”ì˜ ìˆœì„œì™€ ê·œì¹™, ê°„ë‹¨íˆ ì¡ì„ê¹Œìš”?","ì‹œê°„ ë§ì¶° ì´ë™ ë£¨íŠ¸, ì‹œì‘í•´ë³¼ê¹Œìš”?","ì§‘ì¤‘ ííŠ¸ëŸ¬ì§€ì§€ ì•ŠëŠ” ìŒì•…ì´ì£ ?","ì˜¤ëŠ˜ íšŒê³ , ê°„ë‹¨ ëª…ë£Œí•˜ê²Œìš”."]
};

/* í˜ë¥´ì†Œë‚˜ë³„ ì˜µì…˜ (ë‹¹ì‹ ì´ ì“°ë˜ ê·¸ëŒ€ë¡œ ìœ ì§€) */
const PERSONA_OPTIONS = { ENFP:[
    [
      {tag:'spark', text:'ì§€ë„ ì ‘ê³  ê·¸ëƒ¥ ê±¸ì„ë˜ìš”? ëŒë¦¬ë©´ ë°”ë¡œ ë“¤ì–´ê°€ìš”!', reply:'ê·¸ ìš°ì—°ì˜ íƒ€ì´ë°, ì €ë„ ì¢‹ì•„ìš”.'},
      {tag:'safe',  text:'ê³µí†µ ê´€ì‹¬ì‚¬ í•˜ë‚˜ë§Œ ì¡ê³  5ë¶„ë§Œ ì–˜ê¸°í•´ë´ìš”.', reply:'ë¶€ë‹´ ì—†ê³  ë°€ë„ ì¢‹ì•„ìš”.'},
      {tag:'trap',  text:'ê³„íší‘œëŒ€ë¡œ ì´ë™í•´ìš”. ë³€ìˆ˜ëŠ” ìµœì†Œë¡œìš”.', reply:'ì˜¤ëŠ˜ì€ ì—¬ìœ ê°€ ë” ì–´ìš¸ë ¤ìš”.'}
    ],
    [
      {tag:'spark', text:'ì„œë¡œ ì¦‰í¥ ë¯¸ì…˜ í•˜ë‚˜ì”© ì£¼ê³  10ë¶„ ë’¤ ê³µìœ !', reply:'í•¨ê»˜ ë§Œë“  ì¥ë©´ì€ ì˜¤ë˜ ê°€ìš”.'},
      {tag:'safe',  text:'ë‘ êµ°ë°ë§Œ ì •í•´ë‘ê³  ë‚˜ë¨¸ì§€ëŠ” í˜„ì¥ ì„ íƒ!', reply:'ê· í˜•ì´ ì¢‹ì•„ìš”.'},
      {tag:'trap',  text:'ì§ˆë¬¸ ë¦¬ìŠ¤íŠ¸ ìˆœì„œëŒ€ë¡œ ì­‰ ê°ˆê²Œìš”.', reply:'ìˆ¨ ì‰´ í‹ˆì´ í•„ìš”í•´ìš”.'}
    ],
    [
      {tag:'spark', text:'ì™¼ìª½ë§Œ ë³´ê¸° ë£°ë¡œ ê°€ë‹¤ê°€ ëŒë¦¬ë©´ ë©ˆì¶”ê¸°!', reply:'ë£°+ì¦‰í¥, ë¦¬ë“¬ ì¢‹ë„¤ìš”.'},
      {tag:'safe',  text:'í•µì‹¬ í•œ ê³³ë§Œ ì˜ˆì•½, ë‚˜ë¨¸ì§€ëŠ” ìœ ì—°í•˜ê²Œ.', reply:'ì•ˆì •+ììœ  ê´œì°®ì•„ìš”.'},
      {tag:'trap',  text:'ì‹œê°„í‘œëŒ€ë¡œ ì™„ì£¼í•´ìš”. ë™ì„  ë‚­ë¹„ ì—†ì´.', reply:'íš¨ìœ¨ì€ ì¢‹ì€ë° ì˜¤ëŠ˜ í†¤ì€ ë‹¬ë¼ìš”.'}
    ],
    [
      {tag:'spark', text:'ë„ì… ì”ì”, í›…ì—ì„œ í„°ì§€ëŠ” ë…¸ë˜ ì–´ë•Œìš”?', reply:'ì¥ë©´ ì „í™˜ ì œëŒ€ë¡œì—ìš”.'},
      {tag:'safe',  text:'ë¦¬ë“¬ ì¢‹ì€ ì‹œí‹°íŒìœ¼ë¡œ ê°€ë³ê²Œ.', reply:'ë¶„ìœ„ê¸° ë°›ì³ì¤˜ìš”.'},
      {tag:'trap',  text:'ì°¨íŠ¸ 1ìœ„ë¡œ ë¬´ë‚œí•˜ê²Œ ê°ˆê¹Œìš”.', reply:'ë¬´ë‚œí•¨ì´ ê°œì„±ì„ ë®ì„ ë•Œê°€ ìˆì–´ìš”.'}
    ],
    [
      {tag:'spark', text:'ì¢‹ìœ¼ë©´ 5ë¶„ ë” ì¨ì„œ ë‹¤ìŒ ì•½ì† ì¡ì!', reply:'ë°”ë¡œ ì´ì–´ê°€ëŠ” ì¶”ì§„ë ¥, ì¢‹ì•„ìš”.'},
      {tag:'safe',  text:'ì—…ë‹¤ìš´ ìˆì—ˆëŠ”ë° ê·¸ë˜ì„œ ê¸°ì–µì— ë‚¨ë„¤ìš”.', reply:'ì‚´ì•„ ìˆëŠ” ê°ìƒ ì¢‹ì•„ìš”.'},
      {tag:'trap',  text:'ìŒâ€¦ ë¬´ë‚œí–ˆì–´ìš”.', reply:'ì—”ë“œì— ì˜¨ê¸° í•œ ì¤„ë§Œ ë”.'}
    ]
  ],
  ENFJ:[
    [
      {tag:'spark', text:'ì²˜ìŒì´ë‹ˆê¹Œ í˜¸í¡ë¶€í„° ë§ì¶°ë´ìš”. ì œê°€ ë¦¬ë“œí• ê²Œìš”?', reply:'ë”°ëœ»í•˜ê²Œ ì´ëŒì–´ì£¼ë©´ ê¸ˆë°© í¸í•´ì ¸ìš”.'},
      {tag:'safe',  text:'ì²œì²œíˆ ì„œë¡œ í˜ì´ìŠ¤ ë³´ë©´ì„œ ê°ˆê¹Œìš”?', reply:'ê· í˜•ì´ ì¢‹ì•„ìš”.'},
      {tag:'trap',  text:'ê°ì í•˜ê³  ì‹¶ì€ ê±° ë”°ë¡œ í•´ìš”.', reply:'í•¨ê»˜ì˜ ê°ê°ì´ ì‚¬ë¼ì ¸ìš”.'}
    ],
    [
      {tag:'spark', text:'ì„œë¡œì—ê²Œ ì‘ì€ ë¯¸ì…˜ í•˜ë‚˜ì”©. ì¹­ì°¬ë¶€í„° ì‹œì‘!', reply:'ì˜¨ê¸°ê°€ ë°”ë¡œ ì˜¬ë¼ê°€ë„¤ìš”.'},
      {tag:'safe',  text:'ê³µê° í¬ì¸íŠ¸ 3ê°œ ì°¾ì•„ë³´ê¸°.', reply:'ì°¨ë¶„íˆ ì¢‹ìŠµë‹ˆë‹¤.'},
      {tag:'trap',  text:'ë…¼ìŸ ì£¼ì œë¡œ ë¶„ìœ„ê¸° ì˜¬ë ¤ìš”.', reply:'ì§€ê¸ˆì€ ì—°ê²°ì´ ë¨¼ì €ì˜ˆìš”.'}
    ],
    [
      {tag:'spark', text:'ì‚¬ì§„ í•œ ì¥ ì°ê³  ì„œë¡œì—ê²Œ ì œëª© ë¶™ì—¬ì£¼ê¸°.', reply:'í•¨ê»˜ ë§Œë“  ì˜ë¯¸ê°€ ì˜ˆë»ìš”.'},
      {tag:'safe',  text:'ì¢‹ì•˜ë˜ ìˆœê°„ ëŒì•„ë³´ê¸°.', reply:'ì •ë¦¬ê°€ ë˜ë„¤ìš”.'},
      {tag:'trap',  text:'í‰ì  ë³´ê³ ë§Œ ì›€ì§ì…ì‹œë‹¤.', reply:'ì˜¨ë„ê°€ ì‹ì–´ìš”.'}
    ],
    [
      {tag:'spark', text:'ê°ì„± R&Bë¡œ ë¶„ìœ„ê¸° ì˜¬ë¦´ê¹Œìš”?', reply:'ëŒ€í™”ê°€ ë¶€ë“œëŸ¬ì›Œì ¸ìš”.'},
      {tag:'safe',  text:'ì”ì”í•œ ì–´ì¿ ìŠ¤í‹±ì´ë©´ ì¶©ë¶„í•´ìš”.', reply:'ë”°ëœ»í•´ìš”.'},
      {tag:'trap',  text:'EDMìœ¼ë¡œ í…ì…˜ë¶€í„°!', reply:'ë§¥ì´ ëŠê²¨ìš”.'}
    ],
    [
      {tag:'spark', text:'ì˜¤ëŠ˜ì˜ í•˜ì´ë¼ì´íŠ¸ ì„œë¡œì—ê²Œ í•œ ì¤„ë¡œ ë‚¨ê¸°ê¸°.', reply:'ì˜¤ë˜ ê¸°ì–µë  ê²ƒ ê°™ì•„ìš”.'},
      {tag:'safe',  text:'ë‹´ë²ˆì—” ì¢€ ë” ê¸¸ê²Œ ê±¸ì„ê¹Œìš”?', reply:'ê¸°ëŒ€ë¼ìš”.'},
      {tag:'trap',  text:'ê·¸ëƒ¥ ë­â€¦ ê´œì°®ì•˜ì–´ìš”.', reply:'ì˜¨ê¸°ê°€ ì•„ì‰¬ì›Œìš”.'}
    ]
  ],
  ENTP:[
    [
      {tag:'spark', text:'ê·œì¹™ í•˜ë‚˜ ë§Œë“¤ê³  ë°”ë¡œ ê¹¨ë³¼ê¹Œìš”?', reply:'ë£°ì„ ê¹¨ì•¼ ì¬ë°Œì£ .'},
      {tag:'safe',  text:'ì•„ì´ë””ì–´ 3ê°œë§Œ ë½‘ê³  ì„ íƒí•©ì‹œë‹¤.', reply:'í•©ë¦¬ì ì´ì—ìš”.'},
      {tag:'trap',  text:'ì •ë³´ ê²€ìƒ‰ë¶€í„° ê¹Šê²Œ í•˜ì£ .', reply:'í˜„ì¥ê°ì´ ë‚ ì•„ê°€ìš”.'}
    ],
    [
      {tag:'spark', text:'ìƒë°˜ëœ ì£¼ì¥ ê³¨ë¼ì„œ 3ë¶„ ìŠ¤í”¼ì¹˜!', reply:'ë‘ë‡Œì— ë¶ˆ ë¶™ë„¤ìš”.'},
      {tag:'safe',  text:'ì¥ë‹¨ì  í‘œë¡œ ì •ë¦¬?', reply:'ê¹”ë”í•˜ë„¤ìš”.'},
      {tag:'trap',  text:'ê²°ë¡  ë‚˜ì˜¬ ë•Œê¹Œì§€ ëŒ€ê¸°.', reply:'ì •ì²´ëŠ” ì§€ë£¨í•´ìš”.'}
    ],
    [
      {tag:'spark', text:'ì½”ìŠ¤ ì„ íƒì„ ë™ì „ ë˜ì§€ê¸°ë¡œ?', reply:'í™•ë¥ ë„ ë†€ì´ê°€ ë¼ìš”.'},
      {tag:'safe',  text:'ê·¼ì²˜ 2ê³³ ë¹„êµ í›„ ê²°ì •.', reply:'ë¬´ë‚œí•©ë‹ˆë‹¤.'},
      {tag:'trap',  text:'ì¤„ ì„œëŠ” ë° í•©ë¥˜.', reply:'ì‹œê°„ ë‚­ë¹„ëŠ” ë…¸.'}
    ],
    [
      {tag:'spark', text:'í‘í‚¤í•œ ë¹„íŠ¸ë¡œ ë‡Œ ê¹¨ìš°ê¸°.', reply:'ì•„ì´ë””ì–´ê°€ ì†Ÿì•„ìš”.'},
      {tag:'safe',  text:'ë¡œíŒŒì´ë¡œ ì§‘ì¤‘.', reply:'ì”ì”í•˜ë„¤ìš”.'},
      {tag:'trap',  text:'ë¬´ìŒìœ¼ë¡œ ìƒê°.', reply:'ê³¼í•˜ê²Œ ê±´ì¡°í•´ìš”.'}
    ],
    [
      {tag:'spark', text:'ì˜¤ëŠ˜ì˜ ì¸ì‚¬ì´íŠ¸ë¥¼ ë°ˆìœ¼ë¡œ ì •ë¦¬!', reply:'ë°”ë¡œ ê³µìœ ê°.'},
      {tag:'safe',  text:'ì§§ê²Œ íšŒê³ í•˜ê³  ë§ˆë¬´ë¦¬.', reply:'ê¹”ë”.'},
      {tag:'trap',  text:'ê·¸ëƒ¥ ê·¸ëŸ° í•˜ë£¨ì˜€ì£ .', reply:'ì•„ì‰¬ìš´ ì—”ë”©.'}
    ]
  ],
  ENTJ:[
    [
      {tag:'spark', text:'ì˜¤ëŠ˜ ëª©í‘œ í•˜ë‚˜ ì •í•˜ê³  ì›€ì§ì¼ê¹Œìš”?', reply:'ì§„í–‰ë ¥ ì¢‹ìŠµë‹ˆë‹¤.'},
      {tag:'safe',  text:'ëŒ€ëµ ì½”ìŠ¤ë§Œ ì •í•˜ê³  í˜„ì¥ ì¡°ìœ¨í•˜ì£ .', reply:'ì•ˆì •ì  ì ‘ê·¼.'},
      {tag:'trap',  text:'ê·¸ëƒ¥ ì•„ë¬´ë ‡ê²Œë‚˜ ëŒì•„ë‹¤ë…€ìš”.', reply:'ë¹„íš¨ìœ¨ì…ë‹ˆë‹¤.'}
    ],
    [
      {tag:'spark', text:'ì „ì‹œâ†’íšŒê³  ì§§ê²Œ ì°ê³  ì´ë™í•©ì‹œë‹¤.', reply:'ì™„ë²½. ë°”ë¡œ ê°€ì£ .'},
      {tag:'safe',  text:'ìˆœì„œëŠ” í˜„ì¥ì—ì„œ ë³´ê³  ë¹ ë¥´ê²Œ ê²°ì •!', reply:'ìœ ì—°ì„± ì¸ì •í•©ë‹ˆë‹¤.'},
      {tag:'trap',  text:'ê²°ì •ì€ ë‚˜ì¤‘ì— í•©ì‹œë‹¤.', reply:'ì§€ì—°ì€ ë¦¬ìŠ¤í¬ì˜ˆìš”.'}
    ],
    [
      {tag:'spark', text:'ì‹œê°„ ë‹¨ìœ„ë¡œ ì²´í¬í•˜ë©´ì„œ ì´ë™í•´ìš”.', reply:'ì •í™•. ì‹ ë¢° ìƒê²¨ìš”.'},
      {tag:'safe',  text:'í•µì‹¬ë§Œ ì§€í‚¤ê³  ë‚˜ë¨¸ì§„ ìœ ì—°í•˜ê²Œ.', reply:'ê´œì°®ìŠµë‹ˆë‹¤.'},
      {tag:'trap',  text:'ì¤„ ì„œë„ ê´œì°®ì£ ?', reply:'ë¹„íš¨ìœ¨. íŒ¨ìŠ¤.'}
    ],
    [
      {tag:'spark', text:'ì¬ì¦ˆë¡œ í˜ì´ìŠ¤ ìœ ì§€í•´ìš”.', reply:'í…œí¬ê°€ ë§ì•„ìš”.'},
      {tag:'safe',  text:'ì”ì”í•œ í”Œë¦¬ë¡œ.', reply:'ë¬´ë‚œ.'},
      {tag:'trap',  text:'ì‹œë„ëŸ¬ìš´ ê³³ìœ¼ë¡œ ê°€ìš”.', reply:'ì»¨ë””ì…˜ ë¬´ë„ˆì ¸ìš”.'}
    ],
    [
      {tag:'spark', text:'í•œ ì¤„ íšŒê³  í›„ ë°”ë¡œ ì•¡ì…˜ìœ¼ë¡œ.', reply:'í•©ê²©. ì§„í–‰í•©ì‹œë‹¤.'},
      {tag:'safe',  text:'ê´œì°®ì•˜ì–´ìš”. ë‹¤ìŒì—” ì§€í‘œë„ ë³´ì£ .', reply:'ì¢‹ìŠµë‹ˆë‹¤.'},
      {tag:'trap',  text:'ê·¸ëƒ¥ ê·¸ë¬ë„¤ìš”.', reply:'ë‹¤ìŒì—” ë” ë‚˜ì•„ì§€ì£ .'}
    ]
  ],
  ESFP:[
    [
      {tag:'spark', text:'ì§€ê¸ˆ ë‹¹ì¥ ì¶¤ ì¶”ê¸° ì¢‹ì€ ê³³ ì•Œì•„ìš”!', reply:'ë‚˜ í…ì…˜ ì˜¬ëì–´ìš”!'},
      {tag:'safe',  text:'ê°€ë²¼ìš´ ì‚°ì±…í•˜ë©´ì„œ ì‚¬ì§„ë„ ì°ì.', reply:'ë¹› ì˜ˆë»ìš”.'},
      {tag:'trap',  text:'ì•‰ì•„ì„œ ê¸´ ëŒ€í™”ë¶€í„°.', reply:'ëª¸ì´ ë¨¼ì € ì›€ì§ì´ê³  ì‹¶ì–´ìš”.'}
    ],
    [
      {tag:'spark', text:'ì¦‰ì„ ê¸¸ê±°ë¦¬ ê²Œì„! ì§„ ì‚¬ëŒ ìŒë£Œ ì‚¬ê¸°.', reply:'ì¬ë°Œë‹¤, ê³ ê³ .'},
      {tag:'safe',  text:'ë³´ë“œê²Œì„ ì¹´í˜ ì–´ë•Œ?', reply:'ë¬´ë‚œí•˜ê²Œ ì¬ë°Œì£ .'},
      {tag:'trap',  text:'ë¦¬ë·°ë§Œ í•œì°¸ ì½ì.', reply:'ë¦¬ë“¬ì´ ì‹ì–´ìš”.'}
    ],
    [
      {tag:'spark', text:'ë·° ì¢‹ì€ ë£¨í”„íƒ‘ìœ¼ë¡œ ê¸‰ì„ íšŒ!', reply:'ì™€, ê·¸ëŸ° ë³€ì£¼ ì¢‹ì•„ìš”.'},
      {tag:'safe',  text:'ì‚¬ëŒ ì ì€ ì¹´í˜ë¡œ ì´ë™.', reply:'í¸ì•ˆí•´ìš”.'},
      {tag:'trap',  text:'ëŒ€ê¸° ë§ì€ í•«í”Œ ê°€ì.', reply:'ì¤„ ì„œë©´ ê¸°ì„¸ê°€ êº¾ì—¬ìš”.'}
    ],
    [
      {tag:'spark', text:'ë¼í‹´/íŒìœ¼ë¡œ ë¶„ìœ„ê¸° ì—…!', reply:'ëª¸ì´ ì•Œì•„ì„œ ë°˜ì‘.'},
      {tag:'safe',  text:'ì‹œí‹°íŒìœ¼ë¡œ ì”ì” í…ì…˜.', reply:'ë¬´ë‚œë¬´ë‚œ.'},
      {tag:'trap',  text:'ë¬´ìŒìœ¼ë¡œ ì¡°ìš©íˆ.', reply:'ì‹¬ì‹¬í•´ì ¸ìš”.'}
    ],
    [
      {tag:'spark', text:'ì˜¤ëŠ˜ ë² ìŠ¤íŠ¸ ìƒ· ì°ê³  ë°”ë¡œ ê³µìœ !', reply:'ì§€ê¸ˆë„ ë°˜ì§ê±°ë ¤ìš”.'},
      {tag:'safe',  text:'ë‹´ì—” ì•¼ì™¸ í˜ìŠ¤ ê°€ì.', reply:'ì•½ì†.'},
      {tag:'trap',  text:'ê·¸ëƒ¥ ê·¸ë¬ë‹¤.', reply:'ë‹´ì—” ë¶ˆê½ƒ ì˜ì£ .'}
    ]
  ],
  ESFJ:[
    [
      {tag:'spark', text:'ìë¦¬ê°€ ê´œì°®ìœ¼ë©´ ì œê°€ ê°„ì‹ ì±™ê²¨ì˜¬ê²Œìš”.', reply:'ì„¸ì‹¬í•´ì„œ ë§ˆìŒì´ í¸í•´ìš”.'},
      {tag:'safe',  text:'ë¨¼ì € ì„œë¡œ í¸í•œ ì ë¶€í„° í™•ì¸í• ê¹Œìš”?', reply:'ë”°ëœ»í•©ë‹ˆë‹¤.'},
      {tag:'trap',  text:'ê°ì ì•Œì•„ì„œ í•˜ì£ .', reply:'í•¨ê»˜ì˜ ê°ê°ì´ ì¤„ì–´ìš”.'}
    ],
    [
      {tag:'spark', text:'ì¹­ì°¬ ë¦´ë ˆì´ í•œ ë²ˆ í•˜ê³  ì¶œë°œ!', reply:'ë¶„ìœ„ê¸°ê°€ ì‚´ì•„ìš”.'},
      {tag:'safe',  text:'ê°€ê¹Œìš´ ë°ë¶€í„° ê°€ë³ê²Œ.', reply:'ë¬´ë¦¬ ì—†ì–´ìš”.'},
      {tag:'trap',  text:'ë¹¡ì„¼ ì¼ì •ìœ¼ë¡œ ê½‰ ì±„ìš°ê¸°.', reply:'ìˆ¨ì´ ì°¨ìš”.'}
    ],
    [
      {tag:'spark', text:'ì¶”ì–µ ìŠ¤íŒŸ ê³µìœ í•˜ê³  ìŠ¤í† ë¦¬ ë¶™ì´ê¸°.', reply:'ì •ì´ ìŒ“ì—¬ìš”.'},
      {tag:'safe',  text:'ì‚¬ì§„ í•œë‘ ì¥ìœ¼ë¡œ ì¶©ë¶„í•´ìš”.', reply:'ê¸°ë¡ë§Œ ê°€ë³ê²Œ.'},
      {tag:'trap',  text:'ì½˜í…ì¸  ì†Œë¹„ë§Œ ì­‰.', reply:'êµê°ì´ ë¹„ì–´ìš”.'}
    ],
    [
      {tag:'spark', text:'ë³´ì‚¬ë…¸ë°”ë¡œ ê³µê¸° ì±„ìš°ê¸°.', reply:'ëŒ€í™”ê°€ ì˜ í˜ëŸ¬ìš”.'},
      {tag:'safe',  text:'ì”ì”í•œ ì¬ì¦ˆ.', reply:'í¸ì•ˆí•´ìš”.'},
      {tag:'trap',  text:'í•˜ë“œë½ìœ¼ë¡œ!', reply:'ëŒ€í™”ê°€ ì•ˆ ë“¤ë ¤ìš”.'}
    ],
    [
      {tag:'spark', text:'ì˜¤ëŠ˜ì˜ ê°ì‚¬ í•œ ì¤„ ì„œë¡œì—ê²Œ.', reply:'ë”°ëœ»í•˜ê²Œ ë§ˆë¬´ë¦¬ë„¤ìš”.'},
      {tag:'safe',  text:'ë‹´ì— ì¡°ìš©íˆ ë˜ ë³´ì.', reply:'ì¢‹ì•„ìš”.'},
      {tag:'trap',  text:'ê·¸ëƒ¥ ê·¸ë¬ì–´.', reply:'í•œ ì¤„ ì˜¨ê¸°ê°€ ì•„ì‰¬ì›Œìš”.'}
    ]
  ],
  ESTP:[
    [
      {tag:'spark', text:'ìˆ¨ì€ ìŠ¤íŒŸ í•˜ë‚˜ ë°”ë¡œ ê°‘ì‹œë‹¤.', reply:'ì†ë„ê° ë”± ì¢‹ì•„ìš”.'},
      {tag:'safe',  text:'ì‚°ì±…í•˜ë©° í•€ ì°ì–´ìš”.', reply:'ëŒë¦¬ë©´ ë°”ë¡œ ë“¤ì–´ê°€ìš”.'},
      {tag:'trap',  text:'ì•‰ì•„ì„œ ì–˜ê¸°ë§Œ ê¸¸ê²Œ í•´ìš”.', reply:'ëª¸ì´ ê·¼ì§ˆê·¼ì§ˆí•´ìš”.'}
    ],
    [
      {tag:'spark', text:'í€˜ìŠ¤íŠ¸ í•˜ë‚˜ì”© ì£¼ê³  ì¸ì¦!', reply:'ì œ ìŠ¤íƒ€ì¼ì´ë„¤ìš”.'},
      {tag:'safe',  text:'ë³¼ë§ í•œ íŒ ì–´ë•Œìš”?', reply:'ëª¸ í’€ ê²¸ ë”±.'},
      {tag:'trap',  text:'ì •ë³´ë¶€í„° ëª¨ìì‹œë‹¤.', reply:'ì˜¤ëŠ˜ì€ ì‹¤í–‰ì´ ë¨¼ì €ìš”.'}
    ],
    [
      {tag:'spark', text:'5ë¶„ ì•ˆì— ë‹¤ìŒ ì¥ì†Œ ì •í•´ìš”.', reply:'í•©ì˜. ê³ ë¯¼ ê¸¸ë©´ ì¬ë¯¸ ì‹ì£ .'},
      {tag:'safe',  text:'í•„ìš”í•˜ë©´ ë°”ë¡œ êº¾ì–´ìš”.', reply:'ìœ ì—°í•˜ê²Œ ê°€ì£ .'},
      {tag:'trap',  text:'ìœ ëª…í•œ ê³³ ì¤„ ì„œìš”.', reply:'ëŒ€ê¸°ì¤„ì€ ë³„ë¡œ.'}
    ],
    [
      {tag:'spark', text:'ë¹„íŠ¸ ê°•í•œ íŒìœ¼ë¡œ ì˜¬ë ¤ìš”!', reply:'ë¦¬ë“¬ íƒ€ë©´ í…ì…˜ ì˜¬ë¼ìš”.'},
      {tag:'safe',  text:'ë¼ì´íŠ¸ í™í•©ìœ¼ë¡œ.', reply:'ê³¼í•˜ì§€ ì•Šê²Œ.'},
      {tag:'trap',  text:'ë¬´ìŒìœ¼ë¡œ ê°‘ì‹œë‹¤.', reply:'ê·¸ëŸ¬ë©´ ì¡¸ë¦´ ë“¯.'}
    ],
    [
      {tag:'spark', text:'ë‹¤ìŒì—” ì•¡í‹°ë¹„í‹° ì˜ˆì•½í•´ìš”.', reply:'ê¸°ë¡ ì„¸ì›Œìš”.'},
      {tag:'safe',  text:'ë‹¤ìŒì— ë˜ ë´ìš”.', reply:'ê°€ë³ê²Œ ë‹¤ì‹œ.'},
      {tag:'trap',  text:'ê·¸ëƒ¥ ê·¸ë¬ì–´ìš”.', reply:'ìŠ¤íƒ€ì¼ì„ ì•„ì§ ëª» ì°¾ì•˜ë„¤ìš”.'}
    ]
  ],
  ESTJ:[
    [
      {tag:'spark', text:'ë§Œë‚¨ì˜ ê·œì¹™ í•œ ì¤„ë§Œ í•©ì˜í•˜ê³  ì‹œì‘.', reply:'í•©ì˜ ì™„ë£Œ. ì¢‹ìŠµë‹ˆë‹¤.'},
      {tag:'safe',  text:'ì½”ìŠ¤ëŠ” 2ê³³ë§Œ, ë‚˜ë¨¸ì§„ í˜„ì¥ íŒë‹¨.', reply:'ê· í˜•ì´ ê´œì°®ë„¤ìš”.'},
      {tag:'trap',  text:'ê³„íšì„ ì‹œíŠ¸ë¡œ ê½‰ ì±„ì›Œìš”.', reply:'ê³¼ë„í•œ ê´€ë¦¬ì˜ˆìš”.'}
    ],
    [
      {tag:'spark', text:'ë„ì°©â€“í™œë™â€“íšŒê³  3ìŠ¤í…ë¡œ ì§„í–‰.', reply:'ì²´ê³„ê°€ ì•ˆì •ê°ì„ ì¤˜ìš”.'},
      {tag:'safe',  text:'ë²—ì–´ë‚˜ë©´ ë°”ë¡œ ìˆ˜ì •.', reply:'ìœ ì—°ì„± í™•ë³´.'},
      {tag:'trap',  text:'ë³€ìˆ˜ ì—†ì´ ì™„ì£¼.', reply:'ê²½ì§ë˜ê¸° ì‰¬ì›Œìš”.'}
    ],
    [
      {tag:'spark', text:'ëŒ€ê¸° ë§ì€ ê³³ì€ íŒ¨ìŠ¤, íš¨ìœ¨ ë£¨íŠ¸.', reply:'ì¢‹ì€ íŒë‹¨ì…ë‹ˆë‹¤.'},
      {tag:'safe',  text:'í•µì‹¬ë§Œ ì†Œë¹„.', reply:'ë¬´ë‚œí•©ë‹ˆë‹¤.'},
      {tag:'trap',  text:'ì¤„ ì„œë„ ê°ìˆ˜.', reply:'ë¹„íš¨ìœ¨ì´ ì»¤ìš”.'}
    ],
    [
      {tag:'spark', text:'ì§‘ì¤‘ ííŠ¸ëŸ¬ì§€ì§€ ì•ŠëŠ” ì¬ì¦ˆ.', reply:'ì¼ê´€ì„±ì´ ì¢‹ë„¤ìš”.'},
      {tag:'safe',  text:'ë¡œíŒŒì´ë¡œ í¸íˆ.', reply:'ì§€ì¥ ì—†ì–´ìš”.'},
      {tag:'trap',  text:'ì†ŒìŒ ë§ì€ í´ëŸ½ìŒì•….', reply:'ëŒ€í™” í’ˆì§ˆ ì €í•˜.'}
    ],
    [
      {tag:'spark', text:'ì§§ê²Œ íšŒê³ â€“ë‹¤ìŒ ì•¡ì…˜ ë°”ë¡œ ì„¤ì •.', reply:'ì¢‹ìŠµë‹ˆë‹¤. ì‹¤í–‰í•©ì‹œë‹¤.'},
      {tag:'safe',  text:'ê´œì°®ì•˜ì–´ìš”.', reply:'ë‹´ì—” ë” íš¨ìœ¨ì ìœ¼ë¡œ.'},
      {tag:'trap',  text:'ê·¸ëƒ¥ ê·¸ë¬ì–´ìš”.', reply:'ê²°ë¡ ì´ ë¹„ì—ˆë„¤ìš”.'}
    ]
  ],
  INFP:[
    [
      {tag:'spark', text:'ì‚¬ëŒ ì ì€ ê³¨ëª© ì‚°ì±…ë¶€í„° ê°€ìš”.', reply:'ì¡°ìš©í•´ì„œ ëŒ€í™”ê°€ ë˜ë ·í•´ìš”.'},
      {tag:'safe',  text:'ë”°ëœ»í•œ ì¹´í˜ë¶€í„° ê°€ìš”.', reply:'í¸ì•ˆí•´ìš”.'},
      {tag:'trap',  text:'í•«í”Œ ì¤„ë¶€í„° ì„œìš”.', reply:'ì†ŒìŒ ë§ìœ¼ë©´ íë ¤ì ¸ìš”.'}
    ],
    [
      {tag:'spark', text:'ì˜¤ëŠ˜ ë§ˆìŒ ì›€ì§ì¸ ì¥ë©´ ìˆì—ˆì–´ìš”?', reply:'ë‹¹ì‹  ì›ƒì„ ë•Œìš”.'},
      {tag:'safe',  text:'ë¶„ìœ„ê¸° í¸í•˜ì£ ?', reply:'ë¶€ë“œëŸ¬ì›Œìš”.'},
      {tag:'trap',  text:'ì‚¬ì§„ ë§ì´ ì°ììš”.', reply:'ì§€ê¸ˆì€ ëˆˆìœ¼ë¡œ ë‹´ê³  ì‹¶ì–´ìš”.'}
    ],
    [
      {tag:'spark', text:'ë¹„ ì˜¤ë©´ ë¹„ë‚´ìŒ ë§¡ìœ¼ëŸ¬ ì ê¹ ë‚˜ê°ˆë˜ìš”?', reply:'ì¢‹ì•„í•´ìš”.'},
      {tag:'safe',  text:'ì°½ê°€ ìë¦¬ë¡œ ì˜®ê²¨ë³¼ê¹Œìš”?', reply:'ì¡°ìš©í•˜ë©´ ë” ì¢‹ì•„ìš”.'},
      {tag:'trap',  text:'ë¹¨ë¦¬ ì´ë™í•´ìš”.', reply:'ì²œì²œíˆë„ ê´œì°®ì•„ìš”.'}
    ],
    [
      {tag:'spark', text:'ê°€ì‚¬ ì˜ˆìœ ë…¸ë˜ ë“¤ì–´ë´ìš”.', reply:'ì¶”ì²œí•´ ì£¼ì„¸ìš”.'},
      {tag:'safe',  text:'ì”ì”í•œ í”Œë¦¬ í‹€ê²Œìš”.', reply:'ê³ ë§ˆì›Œìš”.'},
      {tag:'trap',  text:'EDM ì–´ë•Œìš”?', reply:'ì˜¤ëŠ˜ í†¤ì—” ì¡°ê¸ˆâ€¦'}
    ],
    [
      {tag:'spark', text:'ì˜¤ëŠ˜ í•œ ì¤„ ì‹œë¡œ ë§ˆë¬´ë¦¬í•´ìš”.', reply:'ì„¤ë ˆë„¤ìš”.'},
      {tag:'safe',  text:'ë‹¤ìŒì— ë˜ ê±¸ì–´ìš”.', reply:'ê¸°ëŒ€í• ê²Œìš”.'},
      {tag:'trap',  text:'ê·¸ëƒ¥ ê·¸ë¬ë„¤ìš”.', reply:'ì¡°ê¸ˆ ì•„ì‰¬ì› ì–´ìš”.'}
    ]
  ],
  INFJ:[
    [
      {tag:'spark', text:'ì¡°ìš©í•œ ê¸¸ë¡œ ê±¸ìœ¼ë©° ìƒê° ë‚˜ëˆŒê¹Œìš”?', reply:'ê¹Šì´ê°ì´ ì¢‹ì•„ìš”.'},
      {tag:'safe',  text:'ì•‰ì•„ ì°¨ë¶„íˆ ì‹œì‘í•˜ì£ .', reply:'í¸ì•ˆí•©ë‹ˆë‹¤.'},
      {tag:'trap',  text:'ì‚¬ëŒ ë¶ë¹„ëŠ” ê³³ë¶€í„°.', reply:'ì—ë„ˆì§€ê°€ ì‰½ê²Œ ì†Œëª¨ë¼ìš”.'}
    ],
    [
      {tag:'spark', text:'ìš”ì¦˜ ë¶™ì¡ê³  ìˆëŠ” ì£¼ì œ í•˜ë‚˜ ë“¤ë ¤ì¤˜ìš”.', reply:'ëŒ€í™”ê°€ ì„ ëª…í•´ì ¸ìš”.'},
      {tag:'safe',  text:'ê°€ë²¼ìš´ ê·¼í™©ë¶€í„°.', reply:'ë¬´ë‚œí•´ìš”.'},
      {tag:'trap',  text:'í‘¸ëŠ” ì–˜ê¸° ì—†ì´ ë°”ë¡œ í•µì‹¬.', reply:'ì¤€ë¹„ ì‹œê°„ì´ í•„ìš”í•´ìš”.'}
    ],
    [
      {tag:'spark', text:'ì˜ë¯¸ ë‚¨ëŠ” ìŠ¤íŒŸìœ¼ë¡œ ìš°íšŒí•´ìš”.', reply:'ì¥ë©´ì´ ì‚´ì•„ë‚˜ìš”.'},
      {tag:'safe',  text:'ë™ì„ ì€ ê°„ë‹¨íˆ.', reply:'ì§€ì¹˜ì§€ ì•Šì•„ìš”.'},
      {tag:'trap',  text:'ë¹¡ë¹¡í•œ ë£¨íŠ¸ë¡œ.', reply:'í˜¸í¡ì´ ê±°ì¹ ì–´ì ¸ìš”.'}
    ],
    [
      {tag:'spark', text:'í”¼ì•„ë…¸ ì¤‘ì‹¬ì˜ ì¬ì¦ˆë¡œ.', reply:'ìƒê°ì´ ì˜ í’€ë ¤ìš”.'},
      {tag:'safe',  text:'ë¡œíŒŒì´ë¡œ ë¬´ë‚œí•˜ê²Œ.', reply:'ë°°ê²½ì— ì¢‹ì•„ìš”.'},
      {tag:'trap',  text:'ê³¼í•œ ë¹„íŠ¸ë¡œ.', reply:'ë‚´ë©´ íë¦„ì´ ëŠê²¨ìš”.'}
    ],
    [
      {tag:'spark', text:'ì˜¤ëŠ˜ ì–»ì€ í†µì°° í•œ ì¤„ ì„œë¡œì—ê²Œ.', reply:'ì˜ë¯¸ìˆëŠ” ë§ˆì¹¨í‘œë„¤ìš”.'},
      {tag:'safe',  text:'ë‹´ì—” ë” ì—¬ìœ ë¡­ê²Œ.', reply:'ì¢‹ì•„ìš”.'},
      {tag:'trap',  text:'ê·¸ëƒ¥ ê·¸ë¬ì–´ìš”.', reply:'ê¹Šì´ê°€ ë¹„ì—ˆë„¤ìš”.'}
    ]
  ],
  INTP:[
    [
      {tag:'spark', text:'ê¶ê¸ˆì¦ ë¦¬ìŠ¤íŠ¸ì—ì„œ í•˜ë‚˜ ë½‘ì•„ í† ë¡ ?', reply:'ê°€ì„¤ë¶€í„° ì„¸ì›Œë´…ì‹œë‹¤.'},
      {tag:'safe',  text:'ê´€ì°°í•˜ê³  ì²œì²œíˆ íŒŒì•….', reply:'ë°ì´í„° ëª¨ìœ¼ì£ .'},
      {tag:'trap',  text:'ë¶„ìœ„ê¸°ëŠ” ë‚˜ì¤‘ì—, ì§€ê¸ˆì€ íš¨ìœ¨.', reply:'ë†€ì´ì„±ì´ í•„ìš”í•´ìš”.'}
    ],
    [
      {tag:'spark', text:'ì‘ì€ ì‹¤í—˜ ì„¤ê³„í•˜ê³  ë°”ë¡œ ì‹¤í–‰.', reply:'ë°”ë¡œ í”¼ë“œë°± ê°€ëŠ¥í•˜ì£ .'},
      {tag:'safe',  text:'ì¼€ì´ìŠ¤ ìŠ¤í„°ë”” ê³µìœ .', reply:'ì •ë³´ ì¢‹ë„¤ìš”.'},
      {tag:'trap',  text:'ê²°ë¡ ë§Œ ë“£ì.', reply:'ë§¥ë½ì´ ì¤‘ìš”í•´ìš”.'}
    ],
    [
      {tag:'spark', text:'ê²½ë¡œ ìµœì í™” vs ìš°íšŒ, A/B í…ŒìŠ¤íŠ¸!', reply:'ì¬ë°ŒëŠ” ë¹„êµì˜ˆìš”.'},
      {tag:'safe',  text:'ê·¼ì²˜ í›„ë³´ 2ê°œ ë¹„êµ.', reply:'ë‚©ë“ ê°€ëŠ¥.'},
      {tag:'trap',  text:'ì¸ê¸° 1ìœ„ë¡œ ê³ ì •.', reply:'ì‹¤í—˜ì´ ì‚¬ë¼ì ¸ìš”.'}
    ],
    [
      {tag:'spark', text:'ë¸Œë ˆì¸ëŒ„ìŠ¤ìš© ë¯¸ë‹ˆë©€ í…Œí¬ë…¸.', reply:'ëª°ì…ë©ë‹ˆë‹¤.'},
      {tag:'safe',  text:'í™”ì´íŠ¸ë…¸ì´ì¦ˆ+ë¡œíŒŒì´.', reply:'ì§‘ì¤‘ ìœ ì§€.'},
      {tag:'trap',  text:'ê°€ì‚¬ ë¹µë¹µí•œ ê³¡.', reply:'ì¸ì§€ ë¦¬ì†ŒìŠ¤ ë¶„ì‚°.'}
    ],
    [
      {tag:'spark', text:'ì˜¤ëŠ˜ì˜ ê°€ì„¤/ê²°ë¡  ë„ì‹ìœ¼ë¡œ.', reply:'ê¹”ë”í•˜ë„¤ìš”.'},
      {tag:'safe',  text:'ì§§ê²Œ ì •ë¦¬í•˜ê³  ë‹¤ìŒì—.', reply:'ì¢‹ìŠµë‹ˆë‹¤.'},
      {tag:'trap',  text:'ë³„ ì–˜ê¸´ ì—†ì—ˆì£ .', reply:'ì •ë³´ ì†ì‹¤ì´ë„¤ìš”.'}
    ]
  ],
  INTJ:[
    [
      {tag:'spark', text:'ì˜¤ëŠ˜ ì˜ë„ ëª…í™•íˆ. ëª©í‘œ 1ê°œ.', reply:'ì •í™•í•©ë‹ˆë‹¤.'},
      {tag:'safe',  text:'í•µì‹¬ë§Œ ì¶”ë ¤ì„œ ì§„í–‰.', reply:'ê³¼ì‰ì´ ì—†ì–´ìš”.'},
      {tag:'trap',  text:'ì¼ë‹¨ ê°€ë³´ë©´ ì•Œì£ .', reply:'ë¹„íš¨ìœ¨ì´ í½ë‹ˆë‹¤.'}
    ],
    [
      {tag:'spark', text:'ë³€ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ ë§Œë“¤ê³  ì¶œë°œ.', reply:'ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì¢‹êµ°ìš”.'},
      {tag:'safe',  text:'í˜„ì¥ íŒë‹¨ ì—¬ì§€ëŠ” ë‘¡ì‹œë‹¤.', reply:'í•©ë¦¬ì ì…ë‹ˆë‹¤.'},
      {tag:'trap',  text:'ê²°ì •ì€ ìš´ì— ë§¡ê¸°ì£ .', reply:'í†µì œ ë¶ˆëŠ¥ì€ ë¹„ì¶”.'}
    ],
    [
      {tag:'spark', text:'í˜¼ì¡ êµ¬ê°„ì€ íšŒí”¼ ê²½ë¡œë¡œ.', reply:'ì‹œê°„ ì ˆì•½ë©ë‹ˆë‹¤.'},
      {tag:'safe',  text:'ì£¼ìš” ëª©í‘œë§Œ ë‹¬ì„±.', reply:'ì¶©ë¶„í•´ìš”.'},
      {tag:'trap',  text:'ëŒ€ê¸° ì¤„ ì°¸ì—¬.', reply:'ì†ì‹¤ì´ í½ë‹ˆë‹¤.'}
    ],
    [
      {tag:'spark', text:'ì§‘ì¤‘ ì˜¬ë¦¬ëŠ” ì•°ë¹„ì–¸íŠ¸.', reply:'ì‚¬ê³  íë¦„ì´ ì¢‹ì•„ìš”.'},
      {tag:'safe',  text:'í”¼ì•„ë…¸ ì†”ë¡œ.', reply:'ê³¼í•˜ì§€ ì•Šë„¤ìš”.'},
      {tag:'trap',  text:'ì†Œë€í•œ EDM.', reply:'ì¡ìŒì´ ê³¼í•©ë‹ˆë‹¤.'}
    ],
    [
      {tag:'spark', text:'í•œ ì¤„ ì¸ì‚¬ì´íŠ¸ë¥¼ ì„ ì–¸ë¬¸ìœ¼ë¡œ.', reply:'ëª…ë£Œí•©ë‹ˆë‹¤.'},
      {tag:'safe',  text:'ê°„ë‹¨ íšŒê³ .', reply:'ì¶©ë¶„í•©ë‹ˆë‹¤.'},
      {tag:'trap',  text:'ë³„ ë‚´ìš© ì—†ì—ˆì£ .', reply:'ì •ë¦¬ ì—†ì´ëŠ” ë°˜ë³µë¼ìš”.'}
    ]
  ],
  ISFP:[
    [
      {tag:'spark', text:'ë¹› ì˜ˆìœ ê¸¸ë¡œ ëŒì•„ê°€ìš”.', reply:'ìƒ‰ì´ ì˜¤ëŠ˜ì„ ë°”ê¿”ìš”.'},
      {tag:'safe',  text:'í•œì í•œ ì¹´í˜ë¶€í„°.', reply:'ìˆ¨ì´ í¸í•´ìš”.'},
      {tag:'trap',  text:'ì‚¬ëŒ ë§ì€ ë°ë¡œ.', reply:'ê¸ˆë°© ì§€ì³ìš”.'}
    ],
    [
      {tag:'spark', text:'ê·€ì—¬ìš´ ì†Œí’ˆìƒµ ë“¤ë €ë‹¤ ê°€ìš”.', reply:'ì‘ì€ ì„¤ë ˜ ì¢‹ì•„ìš”.'},
      {tag:'safe',  text:'ì¡°ìš©íˆ ê·¸ë¦¼ ë³´ëŸ¬ ê°ˆë˜ìš”?', reply:'ì°¨ë¶„í•´ì ¸ìš”.'},
      {tag:'trap',  text:'ë¦¬ë·° ë†’ì€ ê³³ë§Œ.', reply:'ê°ê°ì´ ì‚¬ë¼ì ¸ìš”.'}
    ],
    [
      {tag:'spark', text:'ê³µì› ë²¤ì¹˜ì—ì„œ ì ê¹ ê·¸ë¦¼ ê·¸ë¦¬ê¸°.', reply:'ì†ì´ ì¦ê±°ì›Œìš”.'},
      {tag:'safe',  text:'ì‚¬ì§„ ëª‡ ì¥ë§Œ.', reply:'ë¹›ë§Œ ë‹´ì•„ë„ ì¶©ë¶„.'},
      {tag:'trap',  text:'ë¹½ë¹½í•œ ì´ë™.', reply:'í”¼ê³¤í•´ì ¸ìš”.'}
    ],
    [
      {tag:'spark', text:'ì–´ì¿ ìŠ¤í‹± ë¼ì´ë¸Œ.', reply:'ë”°ëœ»í•´ìš”.'},
      {tag:'safe',  text:'ë¡œíŒŒì´ ì¹´í˜.', reply:'í¸ì•ˆ.'},
      {tag:'trap',  text:'ê³¼í•œ ë¹„íŠ¸.', reply:'ë¨¸ë¦¬ê°€ ì•„íŒŒìš”.'}
    ],
    [
      {tag:'spark', text:'ì˜¤ëŠ˜ì˜ ìƒ‰ìœ¼ë¡œ ì„œë¡œë¥¼ í‘œí˜„í•´ ë³´ê¸°.', reply:'ì˜ˆìœ í•˜ë£¨ì˜€ë„¤ìš”.'},
      {tag:'safe',  text:'ë‹¤ìŒì—” ì „ì‹œíšŒ ê°€ìš”.', reply:'ì¢‹ì•„ìš”.'},
      {tag:'trap',  text:'ê·¸ëƒ¥ ê·¸ë¬ì–´ìš”.', reply:'ì˜¨ê¸°ê°€ ëœí–ˆì–´ìš”.'}
    ]
  ],
  ISFJ:[
    [
      {tag:'spark', text:'ê°€ë²¼ìš´ ì‚°ì±…ë¶€í„°, í˜¸í¡ ë§ì¶°ìš”.', reply:'ì•ˆì •ê°ì´ ìƒê²¨ìš”.'},
      {tag:'safe',  text:'ì¡°ìš©í•œ ìë¦¬ë¶€í„°.', reply:'í¸ì•ˆí•©ë‹ˆë‹¤.'},
      {tag:'trap',  text:'ë³µì¡í•œ ê³³ ë¨¼ì €.', reply:'ì§€ì¹©ë‹ˆë‹¤.'}
    ],
    [
      {tag:'spark', text:'ì„œë¡œ ë°°ë ¤ë°›ì•˜ë˜ ìˆœê°„ í•˜ë‚˜ì”© ë‚˜ëˆ„ê¸°.', reply:'ë§ˆìŒì´ ë”°ëœ»í•´ìš”.'},
      {tag:'safe',  text:'ì¢‹ì•„í•˜ëŠ” ë£¨í‹´ ì–˜ê¸°í•´ìš”.', reply:'í¸ì•ˆí•´ìš”.'},
      {tag:'trap',  text:'ê°€ë²¼ìš´ ì¥ë‚œìœ¼ë¡œ ëª°ì•„ê°€ê¸°.', reply:'ì¡°ì‹¬ìŠ¤ëŸ¬ì›Œìš”.'}
    ],
    [
      {tag:'spark', text:'í•œì í•œ ê³¨ëª©ìœ¼ë¡œ ìš°íšŒ.', reply:'ìˆ¨ì´ ë†“ì—¬ìš”.'},
      {tag:'safe',  text:'ê³„íšëŒ€ë¡œ ì²œì²œíˆ.', reply:'ì•ˆì •ë¼ìš”.'},
      {tag:'trap',  text:'ë¹¡ë¹¡í•œ ìŠ¤ì¼€ì¤„.', reply:'í”¼ë¡œê°€ ì»¤ìš”.'}
    ],
    [
      {tag:'spark', text:'í”¼ì•„ë…¸/í˜„ì•… ìœ„ì£¼.', reply:'ë¶€ë“œëŸ½ìŠµë‹ˆë‹¤.'},
      {tag:'safe',  text:'ë¡œíŒŒì´/ì¬ì¦ˆ.', reply:'ì¢‹ì•„ìš”.'},
      {tag:'trap',  text:'ì†ŒìŒ ë§ì€ ê³¡.', reply:'ëŒ€í™”ê°€ í˜ë“¤ì–´ìš”.'}
    ],
    [
      {tag:'spark', text:'ì˜¤ëŠ˜ ê³ ë§ˆì› ë˜ ì  í•œ ì¤„.', reply:'ë”°ëœ»í•œ ë§ˆë¬´ë¦¬ë„¤ìš”.'},
      {tag:'safe',  text:'ë‹´ì— ì¡°ìš©íˆ ë˜ ë§Œë‚˜ê¸°.', reply:'ì¢‹ìŠµë‹ˆë‹¤.'},
      {tag:'trap',  text:'ê·¸ëƒ¥ ê·¸ë¬ì–´ìš”.', reply:'í•œ ë—ì´ ì•„ì‰¬ì›Œìš”.'}
    ]
  ],
  ISTP:[
    [
      {tag:'spark', text:'ê·¼ì²˜ ìˆ˜ë¦¬í•´ë³¼ ë§Œí•œ ìì „ê±° ëŒ€ì—¬?', reply:'ì†ì´ ê·¼ì§ˆê·¼ì§ˆí•˜ë„¤ìš”.'},
      {tag:'safe',  text:'ë©”ë‰´ ê°„ë‹¨íˆ ë³´ê³  ë¹ ë¥´ê²Œ ì£¼ë¬¸.', reply:'íš¨ìœ¨ì ì´ì£ .'},
      {tag:'trap',  text:'ì•‰ì•„ì„œ ê¸¸ê²Œë§Œ ëŒ€í™”.', reply:'í–‰ë™ì´ í•„ìš”í•´ìš”.'}
    ],
    [
      {tag:'spark', text:'ë¯¸ë‹ˆ í¼ì¦/ë°©íƒˆì¶œ í•œ íŒ.', reply:'ì§ì ‘ í•´ë³´ë©´ ì•Œì£ .'},
      {tag:'safe',  text:'ì‚°ì±…í•˜ë©´ì„œ ê´€ì°° í¬ì¸íŠ¸ ì°¾ê¸°.', reply:'ê°€ë³ê²Œ ì¢‹ì•„ìš”.'},
      {tag:'trap',  text:'ë¦¬ë·°ë§Œ íƒë….', reply:'í˜„ì¥ê°ì´ ì—†ë„¤ìš”.'}
    ],
    [
      {tag:'spark', text:'ëŒë°œ ìƒí™© ê°€ì •í•˜ê³  ì‹œë‚˜ë¦¬ì˜¤ ì§œë³´ê¸°.', reply:'ëŒ€ì‘ë ¥ í…ŒìŠ¤íŠ¸ ì¢‹ë„¤ìš”.'},
      {tag:'safe',  text:'ìµœë‹¨ ë™ì„ ìœ¼ë¡œ ì´ë™.', reply:'ì‹¤ìš©ì ì…ë‹ˆë‹¤.'},
      {tag:'trap',  text:'ë³µì¡ ë£¨íŠ¸ ê°•í–‰.', reply:'ë¹„íš¨ìœ¨.'}
    ],
    [
      {tag:'spark', text:'ë¯¸ë‹ˆë©€ í…Œí¬/ë“œëŸ¼ ì•¤ ë² ì´ìŠ¤.', reply:'ì§‘ì¤‘ë©ë‹ˆë‹¤.'},
      {tag:'safe',  text:'ë¡œíŒŒì´.', reply:'ë¬´ë‚œ.'},
      {tag:'trap',  text:'ë°œë¼ë“œ.', reply:'ì¡¸ë¦´ ìˆ˜ë„.'}
    ],
    [
      {tag:'spark', text:'í•µì‹¬ë§Œ ë‚¨ê¸°ê³  ê¹”ë”í•˜ê²Œ ë§ˆë¬´ë¦¬.', reply:'ì¢‹ì•„ìš”. ë‹¤ìŒì—ë„ ì´ë ‡ê²Œ.'},
      {tag:'safe',  text:'ë‹´ì— ë˜ ë³´ì£ .', reply:'ê°„ê²°í•©ë‹ˆë‹¤.'},
      {tag:'trap',  text:'ê·¸ëƒ¥ ê·¸ë¬ì–´ìš”.', reply:'íŠ¹ì§•ì´ ì—†ì—ˆë„¤ìš”.'}
    ]
  ],
  ISTJ:[
    [
      {tag:'spark', text:'ì¼ì •ê³¼ ì—¬ìœ , ë‘˜ ë‹¤ ê³ ë ¤í•´ ê³„íš í•©ì˜.', reply:'ê¸°ë³¸ê¸° íƒ„íƒ„í•©ë‹ˆë‹¤.'},
      {tag:'safe',  text:'ì‹œê°„í‘œë§Œ ê°€ë³ê²Œ.', reply:'ì¶©ë¶„í•©ë‹ˆë‹¤.'},
      {tag:'trap',  text:'ì¦‰í¥ìœ¼ë¡œë§Œ.', reply:'ë³€ìˆ˜ê°€ ê³¼í•©ë‹ˆë‹¤.'}
    ],
    [
      {tag:'spark', text:'ìš°ì„ ìˆœìœ„ ì •í•˜ê³  ì´ë™.', reply:'ëª…ë£Œí•˜ë„¤ìš”.'},
      {tag:'safe',  text:'ì£¼ìš”ë§Œ ì²´í¬.', reply:'ì¢‹ìŠµë‹ˆë‹¤.'},
      {tag:'trap',  text:'ëª¨ë‘ ë‹¤ ë³´ì.', reply:'ê³¼ì‰ì´ì—ìš”.'}
    ],
    [
      {tag:'spark', text:'ì •ì‹œ ë„ì°© ê°€ëŠ¥í•œ ë£¨íŠ¸.', reply:'ì‹ ë¢°ê°€ ìƒê²¨ìš”.'},
      {tag:'safe',  text:'í˜¼ì¡ í”¼í•´ì„œ ì²œì²œíˆ.', reply:'ê´œì°®ìŠµë‹ˆë‹¤.'},
      {tag:'trap',  text:'ëŒ€ê¸°ì¤„ë„ ê´œì°®ì•„ìš”.', reply:'ì‹œê°„ ì†ì‹¤.'}
    ],
    [
      {tag:'spark', text:'ì§‘ì¤‘ ë°©í•´ ì—†ëŠ” í´ë˜ì‹.', reply:'ì•ˆì •ì ì…ë‹ˆë‹¤.'},
      {tag:'safe',  text:'ì¬ì¦ˆë¡œ.', reply:'ë¬´ë‚œí•©ë‹ˆë‹¤.'},
      {tag:'trap',  text:'ì†Œë€í•œ ê³¡.', reply:'ì§‘ì¤‘ ì €í•´.'}
    ],
    [
      {tag:'spark', text:'ì˜¤ëŠ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ íšŒê³ .', reply:'ì •ë¦¬ ì˜ ëìŠµë‹ˆë‹¤.'},
      {tag:'safe',  text:'ë‹¤ìŒì— ì´ì–´ì„œ.', reply:'ì¢‹ì•„ìš”.'},
      {tag:'trap',  text:'ê·¸ëƒ¥ ê·¸ë¬ë„¤ìš”.', reply:'ê¸°ë¡ì´ ì—†ì–´ìš”.'}
    ]
  ]
};

/* ê³µìš© í…œí”Œë¦¿(í´ë°±) â€” ê¸°ì¡´ê³¼ ë™ì¼ */
const OPTION_TEMPLATES = {
  spark:['ì§€ë„ ì ‘ê³  ê·¸ëƒ¥ ê±¸ì–´ìš”. ëŒë¦¬ë©´ ë°”ë¡œ ë“¤ì–´ê°€ìš”.','ë¯¸ì…˜ êµí™˜ ì–´ë•Œìš”? ì„œë¡œ í•˜ë‚˜ ì£¼ê³  10ë¶„ ë’¤ ê³µìœ !','ì™¼ìª½ë§Œ ë³´ê¸° ë£°ë¡œ ê°€ë‹¤ ëŒë¦¬ë©´ ë©ˆì¶”ê¸°.','í›…ì—ì„œ í„°ì§€ëŠ” ë…¸ë˜ í•˜ë‚˜ ê³¨ë¼ìš”.','ì¢‹ìœ¼ë©´ ì§€ê¸ˆ 5ë¶„ë§Œ ì¨ì„œ ë‹¤ìŒ ì•½ì† ì¡ì£ .'],
  safe: ['ê³µí†µ ê´€ì‹¬ì‚¬ í•œ ê°€ì§€ë¡œ 5ë¶„ ì§‘ì¤‘ ëŒ€í™”.','ë‘ êµ°ë°ë§Œ ì •í•˜ê³  ë‚˜ë¨¸ì§„ ê°€ë©´ì„œ ê²°ì •.','í•µì‹¬ í•œ ê³³ ì˜ˆì•½í•˜ê³  ë‚˜ë¨¸ì§„ í˜„ì¥ ì„ íƒ.','ê°€ì‚¬ë³´ë‹¤ ë¦¬ë“¬ ì¢‹ì€ ì‹œí‹°íŒ.','ì—…ë‹¤ìš´ ìˆì—ˆëŠ”ë° ê·¸ë˜ì„œ ê¸°ì–µì— ë‚¨ì•„ìš”.'],
  trap: ['ê³„íší‘œëŒ€ë¡œ ì°©ì°©. ë³€ìˆ˜ ìµœì†Œ.','ì§ˆë¬¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆœì„œëŒ€ë¡œ ì§„í–‰.','ì‹œê°„í‘œëŒ€ë¡œ ì™„ì£¼. ë™ì„ ë‚­ë¹„ ì œë¡œ.','ì°¨íŠ¸ 1ìœ„ë¡œ ë¬´ë‚œí•˜ê²Œ ê°€ìš”.','ë¬´ë‚œí–ˆì–´ìš”.']
};

/* ì²« ì¸ì‚¬ */
const GREETINGS = {
  ENFP: "ì˜¤! ì˜¤ëŠ˜ ë¶„ìœ„ê¸° ì¢‹ë„¤ìš”. ê°€ë²¼ìš´ ë†ë‹´ ëª‡ ê°œ ì¤€ë¹„í•´ì™”ëŠ”ë°, ë“¤ì–´ë³¼ë˜ìš”?",
  ENFJ: "ì™€ì£¼ì…”ì„œ ë°˜ê°€ì›Œìš”. í¸í•˜ê²Œ ë§ì”€í•´ ì£¼ì„¸ìš”, ë¶„ìœ„ê¸°ëŠ” ì œê°€ ë¶€ë“œëŸ½ê²Œ ë§Œë“¤ê²Œìš”.",
  ENTP: "ì €ëŠ” ìƒˆë¡œìš´ ìƒí™©ì—ì„œ ë£°ì„ ê¹¨ëŠ” ê±¸ ì¦ê²¨ìš”. ì˜¤ëŠ˜ë„ ì•„ë§ˆ ê·¸ëŸ´ ë“¯?",
  ENTJ: "ë°˜ê°‘ìŠµë‹ˆë‹¤. ì˜¤ëŠ˜ì€ ì„œë¡œ ì‹œê°„ ê°’ì§€ê²Œ ì¨ë´…ì‹œë‹¤. ëª©í‘œëŠ” â€˜ì¬ë°ŒëŠ” í•˜ë£¨â€™ ì–´ë•Œìš”?",
  ESFP: "ì˜¤ëŠ˜ì€ ê¸°ë¶„ì´ ì—…ì´ì—ìš”! ëˆˆì— ë„ëŠ” ê±° ìˆìœ¼ë©´ ë°”ë¡œ ê°€ë³¼ê¹Œìš”?",
  ESFJ: "ìë¦¬ í¸í•˜ì£ ? ì €ëŠ” ì±™ê²¨ì£¼ëŠ” ê±° ìì‹  ìˆì–´ì„œ, ê±±ì • ì—†ì´ ì¦ê¸°ì‹œë©´ ë¼ìš”.",
  ESTP: "ì•‰ì•„ì„œ ì–˜ê¸°í•˜ëŠ” ê²ƒë„ ì¢‹ì§€ë§Œ, ë°”ë¡œ ë­”ê°€ í•´ë³´ëŠ” ê±´ ì–´ë–¨ê¹Œìš”?",
  ESTJ: "ë§Œë‚¨ë„ ì „ëµì´ í•„ìš”í•˜ì£ . ê°„ë‹¨í•œ ê³„íš í•˜ë‚˜ ì„¸ìš°ê³  ì‹œì‘í• ê¹Œìš”?",
  INFP: "ì„œë‘ë¥´ì§€ ì•Šì•„ë„ ë¼ìš”. ì˜¤ëŠ˜ì€ ì„œë¡œì˜ ì´ì•¼ê¸°ì— ì¡°ê¸ˆì”© ë¬¼ë“¤ì–´ê°€ëŠ” ê±¸ë¡œ í•´ìš”.",
  INFJ: "ì²˜ìŒì´ë¼ ì¡°ê¸ˆ ì¡°ìš©í•  ìˆ˜ ìˆì§€ë§Œ, ê³§ ê¹Šì€ ì–˜ê¸° ë‚˜ì˜¬ ê±°ì˜ˆìš”.",
  INTP: "ì €, ê¶ê¸ˆí•œ ê²Œ ë§ì•„ìš”. ì‹¤í—˜í•˜ë“¯ ëŒ€í™”í•˜ë©´ ì¬ë°Œì„ ê²ƒ ê°™ì•„ìš”.",
  INTJ: "ì¢‹ì•„ìš”, ì„œë¡œ ì›í•˜ëŠ” ê²Œ ë­”ì§€ ë°”ë¡œ ë§ì¶°ê°€ì£ . ê·¸ê²Œ í¸í•˜ì–ì•„ìš”.",
  ISFP: "ì˜¤ëŠ˜ì€ ë°œê¸¸ ë‹¿ëŠ” ëŒ€ë¡œ ê°€ë³¼ë˜ìš”? ëŠë‚Œì´ ì¢‹ì€ ë‚ ì´ê±°ë“ ìš”.",
  ISFJ: "í¸ì•ˆí•˜ê²Œ ì‹œì‘í•˜ì£ . ë¶€ë‹´ ì—†ì´ ì„œë¡œ ì•Œì•„ê°€ë©´ ì¢‹ê² ì–´ìš”.",
  ISTP: "ë°”ë¡œ ì²´í—˜í•´ë³´ëŠ” ê²Œ ì œ ìŠ¤íƒ€ì¼ì´ì—ìš”. ë§ë³´ë‹¨ í•´ë³´ëŠ” ê±¸ë¡œ.",
  ISTJ: "ê¸°ë³¸ë¶€í„° ì°¨ê·¼ì°¨ê·¼, ì„œë‘ë¥´ì§€ ì•Šê³  ê°€ëŠ” ê²Œ ì¢‹ì£ ."
};

/* ë°ì´í„° ë¹Œë“œ */
function buildGameData(type){
  const qs = QUESTIONS[type] || QUESTIONS.ENFP;
  const persona = PERSONA_OPTIONS[type];
  const scorePos=[18,16,14,16,20], scoreNeg=[-12,-12,-12,-10,-12];
  if(persona){
    return qs.map((q,i)=>{
      const opts = persona[i].map((o)=>({
        tag:o.tag, text:o.text, reply:o.reply,
        score: o.tag==='spark'?scorePos[i]: o.tag==='trap'?scoreNeg[i]: 6,
        grantsKey: i===0 && o.tag==='spark'
      }));
      return { q, opts };
    });
  }
  return qs.map((q,i)=>({ q, opts:[
    {tag:'spark',score:scorePos[i],text:OPTION_TEMPLATES.spark[i],reply:'ì¢‹ì•„ìš”!',grantsKey:i===0},
    {tag:'safe', score:6,text:OPTION_TEMPLATES.safe[i],reply:'ë¬´ë‚œí•˜ë„¤ìš”.'},
    {tag:'trap', score:scoreNeg[i],text:OPTION_TEMPLATES.trap[i],reply:'ì¡°ê¸ˆ ë”±ë”±í•´ìš”.'}
  ] }));
}

/* ê³µìš© ìœ í‹¸ */
function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }
function addDialogue(text, isPlayer=false){
  while(dialogueArea.childElementCount > 1){ dialogueArea.removeChild(dialogueArea.firstElementChild); }
  const row=document.createElement('div'); row.className='w-full flex';
  const bubble=document.createElement('div'); bubble.textContent=text; bubble.className='dialogue-bubble';
  if(isPlayer){ row.classList.add('justify-end'); bubble.style.background='var(--pink-500)'; bubble.style.color='#fff'; bubble.style.border='none'; bubble.style.borderBottomRightRadius='.35rem'; }
  else { row.classList.add('justify-start'); bubble.style.background='#ffffff'; bubble.style.color='#1f2937'; bubble.style.border='1px solid #f3e5ea'; bubble.style.borderBottomLeftRadius='.35rem'; }
  row.appendChild(bubble); dialogueArea.appendChild(row); dialogueArea.scrollTop=dialogueArea.scrollHeight;
}
function updateMeters(){ score=Math.max(0,Math.min(200,score)); scoreText.textContent=`${score} / 200`; scoreBarInner.style.width=`${score/2}%`; strikeBadge.textContent=`${strikes} / ${maxStrikes}`; progressText.textContent=`${Math.min(currentRound+1,gameData.length)} / ${gameData.length}`; }
function renderRound(idx){
  optionsArea.innerHTML=''; const round=gameData[idx];
  setTimeout(()=>{ 
    addDialogue(round.q); 
    shuffle([...round.opts]).forEach(opt=>{
      const btn=document.createElement('button'); 
      btn.textContent=opt.text; 
      const tagStyle = opt.tag==='spark' ? 'bg-pink-50 border-pink-300 hover:bg-pink-100 text-[#b4235b]' : opt.tag==='safe' ? 'bg-amber-50 border-amber-300 hover:bg-amber-100 text-[#7a4b00]' : 'bg-gray-50 border-gray-300 hover:bg-gray-100 text-gray-700'; 
      btn.className = `w-full text-left p-4 rounded-xl font-medium border ${tagStyle}`; 
      btn.onclick=()=>handleOption(opt); 
      optionsArea.appendChild(btn); 
    }); 
  },200);
}

/* ì‚¬ìš´ë“œ/í† ìŠ¤íŠ¸/íŒŒí‹°í´ */
const AudioKit = (()=>{ 
  const ctx = new (window.AudioContext||window.webkitAudioContext)(); let unlocked=false; 
  function resume(){ if(ctx.state!=='running'){ ctx.resume(); } unlocked=true; } 
  function env(node,{a=0.003,d=0.22,s=0.0001,r=0.12,peak=0.7}={}){ const t=ctx.currentTime; node.gain.cancelScheduledValues(t); node.gain.setValueAtTime(0.0001,t); node.gain.linearRampToValueAtTime(peak,t+a); node.gain.exponentialRampToValueAtTime(Math.max(0.0001,peak*s),t+a+d); node.gain.setTargetAtTime(0.0001,t+a+d,r);} 
  function mallet({freq=880,dur=0.28}={}){ const g=ctx.createGain(); env(g,{}); const bp=ctx.createBiquadFilter(); bp.type='bandpass'; bp.frequency.value=freq*2; bp.Q.value=6; const lpf=ctx.createBiquadFilter(); lpf.type='lowpass'; lpf.frequency.value=4200; lpf.Q.value=.7; const o1=ctx.createOscillator(); o1.type='sine'; o1.frequency.value=freq; const o2=ctx.createOscillator(); o2.type='triangle'; o2.frequency.value=freq*2.66; const o3=ctx.createOscillator(); o3.type='sine'; o3.frequency.value=freq*3.98; o1.connect(g); o2.connect(g); o3.connect(g); g.connect(bp); bp.connect(lpf); lpf.connect(ctx.destination); const now=ctx.currentTime; [o1,o2,o3].forEach(o=>{o.start(now); o.stop(now+dur);}); return new Promise(r=>o3.onended=r);} 
  async function xylophoneSuccess(){ const base=880; await mallet({freq:base}); await mallet({freq:base*1.333}); await mallet({freq:base*1.781}); } 
  async function meh(){ await mallet({freq:523,dur:.2}); } 
  async function fail(){ await mallet({freq:220,dur:.3}); await mallet({freq:175,dur:.32}); } 
  function prime(){ 
  // ê±°ì˜ ë“¤ë¦¬ì§€ ì•ŠëŠ” ì•„ì£¼ ì§§ì€ ìŒìœ¼ë¡œ iOS/Android ì˜¤ë””ì˜¤ ê¶Œí•œ í”„ë¼ì„
  const g = ctx.createGain(); 
  g.gain.value = 0.0001; 
  const o = ctx.createOscillator(); 
  o.type = 'sine'; 
  o.frequency.value = 440; 
  o.connect(g); 
  g.connect(ctx.destination); 
  const now = ctx.currentTime; 
  o.start(now); 
  o.stop(now + 0.05); 
}
  return { resume, xylophoneSuccess, meh, fail, prime, get unlocked(){return unlocked;} };
})();
// ëª¨ë°”ì¼ ì˜¤ë””ì˜¤ í•´ì œ: ì²« ì œìŠ¤ì²˜(click/touch/pointer)ì—ì„œ í•œ ë²ˆë§Œ ìˆ˜í–‰
function bindAudioUnlock(){
  let done = false;
  const tryUnlock = () => {
    if (done) return;
    done = true;
    try {
      AudioKit.resume();
      AudioKit.prime();                 // ë¬´ìŒ í”„ë¼ì„
      showToast('ì‚¬ìš´ë“œ ì˜¨','ok');      // í•„ìš” ì—†ìœ¼ë©´ ì§€ì›Œë„ ë¨
    } catch(e) { /* noop */ }
    ['touchstart','pointerdown','click'].forEach(t=>{
      document.removeEventListener(t, tryUnlock, true);
    });
  };
  ['touchstart','pointerdown','click'].forEach(t=>{
    document.addEventListener(t, tryUnlock, true);
  });
}

// DOMContentLoaded ë•Œ ë“±ë¡
document.addEventListener('DOMContentLoaded', bindAudioUnlock);

const ICONS = { heart:`<svg viewBox="0 0 24 24" fill="#ef4444" xmlns="http://www.w3.org/2000/svg"><path d="M12 21s-6.716-4.297-9.192-7.23C.69 11.36 1.127 7.9 3.757 6.33A5.2 5.2 0 0 1 12 7.2a5.2 5.2 0 0 1 8.243-.87c2.63 1.57 3.066 5.03.95 7.44C18.716 16.703 12 21 12 21z"/></svg>`, spark:`<svg viewBox="0 0 24 24" fill="#f59e0b" xmlns="http://www.w3.org/2000/svg"><path d="M12 2l2.2 5.8L20 10l-5.8 2.2L12 18l-2.2-5.8L4 10l5.8-2.2L12 2z"/></svg>`, broken:`<svg viewBox="0 0 24 24" fill="#9ca3af" xmlns="http://www.w3.org/2000/svg"><path d="M12 21s-6.716-4.297-9.192-7.23C.69 11.36 1.127 7.9 3.757 6.33c1.29-.77 2.77-.93 4.12-.54L10 9l-2 3 3 2-1 3 2 1 2-4-3-2 1-3 2-2a5.2 5.2 0 0 1 3.12.06c2.63 1.57 3.066 5.03.95 7.44C18.716 16.703 12 21 12 21z"/></svg>`, shard:`<svg viewBox="0 0 24 24" fill="#6b7280" xmlns="http://www.w3.org/2000/svg"><path d="M4 14l6-10 4 6-6 10-4-6z"/></svg>` };
function spawnBurst(kind='pos', strength=6){ const count=Math.max(4,Math.min(14,Math.round(strength))); const rect=effectsLayer.getBoundingClientRect(); const centerX=rect.width/2; const baseY=rect.height*0.88; for(let i=0;i<count;i++){ const el=document.createElement('div'); el.className=`particle ${kind}`; const icon = kind==='pos' ? (Math.random()<.5?ICONS.heart:ICONS.spark) : (Math.random()<.6?ICONS.broken:ICONS.shard); el.innerHTML=icon; const angle=(Math.random()*80-40); const dist=40+Math.random()*40; const x=Math.cos(angle*Math.PI/180)*dist; const y=Math.sin(angle*Math.PI/180)*(kind==='pos'?-dist:dist); const rot=(Math.random()*120-60)+'deg'; const size=14+Math.random()*10+'px'; const dur=(700+Math.random()*600)+'ms'; el.style.left=(centerX-10+(Math.random()*20-10))+'px'; el.style.top=baseY+'px'; el.style.setProperty('--x',x+'px'); el.style.setProperty('--y',y+'px'); el.style.setProperty('--rot',rot); el.style.setProperty('--size',size); el.style.setProperty('--dur',dur); effectsLayer.appendChild(el); setTimeout(()=>el.remove(),1200);} }
function addScore(delta){ if(!delta) return; score+=delta; if(delta>0) spawnBurst('pos', Math.min(12,4+delta/2)); else spawnBurst('neg', Math.min(12,4+Math.abs(delta)/2)); }
function showToast(msg, kind='meh'){ const el=document.createElement('div'); el.className='toast-item'; el.style.background = kind==='ok'?'#16a34a':kind==='bad'?'#ef4444':'#64748b'; el.textContent=msg; toast.appendChild(el); requestAnimationFrame(()=>el.classList.add('show')); setTimeout(()=>{ el.classList.remove('show'); setTimeout(()=>el.remove(),250); },1200); }
function showReply(text){ replyPop.innerHTML=''; const card=document.createElement('div'); card.className='reply-card'; card.innerHTML = `ğŸ’¬ ${text}`; replyPop.appendChild(card); requestAnimationFrame(()=>card.classList.add('show')); setTimeout(()=>{ card.classList.remove('show'); setTimeout(()=>{ replyPop.innerHTML=''; },200); }, 1300); }

/* ========== ê·œì¹™/íë¦„ ========== */
function isFType(type){ return type && type[2] === 'F'; }

function decorateReplyForType(type, base, tag){
  if(!isFType(type)) return base;
  if(tag === 'spark') return `${base} ì„¤ë ˆìš”, ì§€ê¸ˆ ì´ ëŠë‚Œ ê³„ì† ê°€ìš”`;
  if(tag === 'safe')  return `${base} í¸ì•ˆí•´ì„œ ì¢‹ì•„ìš”`;
  if(tag === 'trap')  return `${base} ìŒâ€¦ ì¡°ê¸ˆ ì•„ì‰¬ì› ì–´ìš”. ë‹¤ìŒì€ ìš°ë¦¬ í…œí¬ë¡œ ê°€ìš”.`;
  return base;
}

function applyHidden(opt){
  if(opt.tag === 'spark'){
    sparkStreak += 1;
    if(sparkStreak >= 2){
      addScore(6);
      showToast('ì½¤ë³´ ë³´ë„ˆìŠ¤ +6','ok');
    }
  } else {
    sparkStreak = 0;
  }

  if(opt.grantsKey){
    keyBuff = true;
  } else if(keyBuff && opt.tag === 'spark'){
    addScore(4);
    keyBuff = false;
    showToast('í‚¤ ì‹œë„ˆì§€ +4','ok');
  }

  if(lastTag === 'trap' && opt.tag === 'trap'){
    strikes += 1;
    addScore(-4);
    showToast('ì—°ì† ì‹¤ìˆ˜ -4','bad');
  }

  lastTag = opt.tag;
}

function charmDelta(opt){
  const isFinal = currentRound === gameData.length - 1;
  if(isFinal) return;

  if(opt.tag === 'spark'){
    showToast('ë§¤ë ¥ì´ ìƒìŠ¹í–ˆë‹¤','ok');
    try{ AudioKit.xylophoneSuccess(); }catch(_e){}
  } else if(opt.tag === 'trap'){
    showToast('ë§¤ë ¥ì´ ê°ì†Œí–ˆë‹¤','bad');
    try{ AudioKit.fail(); }catch(_e){}
  } else {
    showToast('ë§¤ë ¥ì´ ìœ ì§€ëë‹¤','meh');
    try{ AudioKit.meh(); }catch(_e){}
  }
}

function handleOption(opt){
     // ëª¨ë°”ì¼ì—ì„œ ì²« í´ë¦­ ì‹œ ì˜¤ë””ì˜¤ í•´ì œ + ì‹¤ì œ íš¨ê³¼ìŒ ì¬ìƒ
  if(!AudioKit.unlocked){ 
    try { 
      AudioKit.resume(); 
      AudioKit.prime(); 
      // ì²« ì•¡ì…˜ì—ì„œ ì‹¤ì œ ì†Œë¦¬ ì¬ìƒ (sfxClickì€ ë„¤ í´ë¦­ íš¨ê³¼ìŒ ì˜¤ë””ì˜¤ ê°ì²´)
      if (typeof sfxClick !== 'undefined') {
        sfxClick.currentTime = 0;
        sfxClick.play();
      }
    } catch(_e){} 
  }

  if(!gameActive) return;

  addDialogue(opt.text, true);
  optionsArea.innerHTML = '<div class="text-center text-gray-500 animate-pulse">ë‹µë³€ ì¤‘â€¦</div>';

  setTimeout(()=>{
    addScore(opt.score);
    if(opt.tag === 'trap') strikes += 1;
    chosenMbti.push(targetMbti);
    applyHidden(opt);
    updateMeters();
    charmDelta(opt);

    const replyText = decorateReplyForType(targetMbti, opt.reply, opt.tag);
    showReply(replyText);

    currentRound++;
    const out = currentRound >= gameData.length;
    const tooMany = strikes >= maxStrikes;

    if(out || tooMany){
      endGame(score, tooMany && !out);
    } else {
      renderRound(currentRound);
    }
  }, 650);
}

function endGame(finalScore, dueToStrikes=false){
  gameActive = false;
  if (replyPop) replyPop.innerHTML = '';

  const t = document.getElementById('result-title');
  const m = document.getElementById('result-message');
  const s = document.getElementById('result-score');
  const iconEl = document.getElementById('result-icon');

  let tier = 'fail';
  if(finalScore >= 165) tier = 'great';
  else if(finalScore >= 125) tier = 'good';
  else if(finalScore >= 95)  tier = 'meh';

  t.textContent = (tier==='great')? 'ì• í”„í„° ëŒ€ì„±ê³µ'
                : (tier==='good') ? 'ì• í”„í„° ì‹ ì²­ ê°'
                : (tier==='meh')  ? 'ì—¬ì§€ ìˆìŒ'
                : 'ìƒëŒ€ë°©ì´ ë‚  ì°¨ë‹¨í–ˆì–´ìš”.';

  if(iconEl){
    iconEl.textContent = (tier==='fail') ? 'ğŸ’”' : (tier==='meh') ? 'ğŸ™‚' : 'ğŸ’–';
    iconEl.style.fontSize = '44px';
  }

  // ì‹¤íŒ¨ì‹œ íŒŒì´ë„ íŒŒí‹°í´ ì—†ìŒ
  if(tier !== 'fail'){
    triggerFinalFX(tier);
  }

  const mbtiCount = chosenMbti.reduce((acc,t)=>{ acc[t]=(acc[t]||0)+1; return acc; },{});
  const topMbti = Object.entries(mbtiCount).sort((a,b)=>b[1]-a[1])[0]?.[0];

  let line = '';
  if(topMbti){
    if(tier==='great' && topMbti===targetMbti){
      line = `\në‹¹ì‹ ì€ <b>${topMbti}</b>ì™€ ì‚¬ê·ˆ ìˆ˜ ìˆì„ ê²ƒ ê°™ë„¤ìš”.`;
    } else if(tier==='fail' && topMbti!==targetMbti){
      line = `\n<b>${topMbti}</b> ê³¼ ì†Œê°œíŒ…í•˜ëŠ”ê²Œ ì–´ë•Œìš”?`;
    }
  }

  m.innerHTML = (dueToStrikes? 'ì¤‘ê°„ì— ì‚ê±±ì˜€ì§€ë§Œ ë¦¬ë“¬ì€ ìœ ì§€í–ˆì–´ìš”.' : 'ì˜¤ëŠ˜ ì¦ê±°ì› ì–´ìš”.') + line;
  s.textContent = `ìµœì¢… ì—ë„ˆì§€: ${finalScore} Â· ì‹¤ìˆ˜: ${strikes} / ${maxStrikes}`;
  resultModal.classList.remove('hidden');
}

function triggerFinalFX(tier){
  finalLayer.innerHTML = '';
  const cele = document.createElement('div');
  cele.className = 'celebration';
  finalLayer.appendChild(cele);

  const iconsGood = ['ğŸ’–','ğŸŒŸ','ğŸ’«','âœ¨','ğŸ§¡','ğŸ‰'];
  const iconsBad  = ['ğŸ’”','â˜”','âš¡','ğŸª¨'];
  const good = (tier==='great' || tier==='good');
  const icons = good ? iconsGood : iconsBad;

  const N  = good ? 72 : 48;
  const cx = window.innerWidth / 2;
  const cy = window.innerHeight * 0.45;

  for(let i=0;i<N;i++){
    const span = document.createElement('span');
    span.className = 'burst';
    span.textContent = icons[Math.floor(Math.random()*icons.length)];
    span.style.fontSize = (good ? '34px' : '28px');

    const angle = (Math.PI*2*(i/N)) + (Math.random()*0.6-0.3);
    const r = 60 + Math.random()*160;

    span.style.left = (cx + Math.cos(angle)*r) + 'px';
    span.style.top  = (cy + Math.sin(angle)*r) + 'px';
    span.style.animationDelay = (Math.random()*0.5) + 's';
    cele.appendChild(span);
  }
}

function restartGame(){
  score = 100;
  currentRound = 0;
  strikes = 0;
  chosenMbti = [];
  sparkStreak = 0;
  lastTag = null;
  keyBuff = false;

  dialogueArea.innerHTML = '';
  optionsArea.innerHTML = '';
  resultModal.classList.add('hidden');
  gameActive = true;

  updateMeters();
  startGame(true);
}

function resetAll(){
  score = 100;
  currentRound = 0;
  strikes = 0;
  chosenMbti = [];
  sparkStreak = 0;
  lastTag = null;
  keyBuff = false;

  dialogueArea.innerHTML = '';
  optionsArea.innerHTML = '';
  resultModal.classList.add('hidden');
  gameActive = true;

  updateMeters();
}

/* ì¤‘ì•™ íŒì—…(ì²« ì¸ì‚¬ ì „ìš©/ê°„ë‹¨ í† ìŠ¤íŠ¸ ëŒ€ì²´) */
function showPopup(message, duration = 1600, onDone){
  replyPop.innerHTML = '';
  const card = document.createElement('div');
  card.className = 'reply-card';
  card.innerHTML = message;
  replyPop.appendChild(card);

  requestAnimationFrame(()=> card.classList.add('show'));

  setTimeout(()=>{
    card.classList.remove('show');
    setTimeout(()=>{
      replyPop.innerHTML = '';
      if (onDone) onDone();
    }, 180);
  }, duration);
}

/* ê²Œì„ ì‹œì‘: ì²« ì¸ì‚¬ëŠ” íŒì—…, ê·¸ í›„ ë¼ìš´ë“œ 1 ì‹œì‘ */
function showPopup(message, duration = 1600, onDone) {
  // íŒì—… ì»¨í…Œì´ë„ˆ
  const popup = document.createElement('div');
  popup.style.position = 'fixed';
  popup.style.top = '50%';
  popup.style.left = '50%';
  popup.style.transform = 'translate(-50%, -50%)';
  popup.style.zIndex = '9999';
  popup.style.display = 'flex';
  popup.style.justifyContent = 'center';
  popup.style.alignItems = 'center';
  popup.style.pointerEvents = 'none';

  // íŒì—… ì¹´ë“œ
  const card = document.createElement('div');
  card.style.background = '#fff';
  card.style.border = '2px solid #f8b4c0';
  card.style.borderRadius = '16px';
  card.style.padding = '32px 24px'; // ìœ„ì•„ë˜ í¬ê²Œ í™•ì¥
  card.style.fontSize = '1.1rem';
  card.style.color = '#c24373';
  card.style.fontWeight = 'bold';
  card.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
  card.style.opacity = '0';
  card.style.transform = 'scale(0.95)';
  card.style.transition = 'all 0.18s ease';
  card.innerHTML = message;

  popup.appendChild(card);
  document.body.appendChild(popup);

  // ë“±ì¥ ì• ë‹ˆë©”ì´ì…˜
  requestAnimationFrame(() => {
    card.style.opacity = '1';
    card.style.transform = 'scale(1)';
  });

  // duration í›„ ì œê±°
  setTimeout(() => {
    card.style.opacity = '0';
    card.style.transform = 'scale(0.95)';
    setTimeout(() => {
      popup.remove();
      if (onDone) onDone();
    }, 180);
  }, duration);
}

function startGame() {
  gameData = buildGameData(targetMbti || 'ENFP');
  updateMeters();

  const hi = GREETINGS[targetMbti || 'ENFP'] || 'ì•ˆë…•í•˜ì„¸ìš”! í¸í•˜ê²Œ ì‹œì‘í•´ìš”.';

  // ì²« ì¸ì‚¬ë¥¼ ì¤‘ì•™ íŒì—…ìœ¼ë¡œ í‘œì‹œí•œ í›„ ë¼ìš´ë“œ 1 ì‹œì‘
  showPopup(hi, 1600, () => {
    renderRound(0);
  });
}

/* ===== ë¶€íŠ¸ìŠ¤íŠ¸ë© (CodePen: JS íŒ¨ë„ ì „ìš©) ===== */
let gameData = [];
document.addEventListener('DOMContentLoaded', () => {
  // DOM refs ì—°ê²°
  launcher     = document.getElementById('launcher');
  row1         = document.getElementById('row1');
  row2         = document.getElementById('row2');
  randomBtn    = document.getElementById('randomBtn');
  gameRoot     = document.getElementById('game-root');
  backBtn      = document.getElementById('backBtn');
  restartBtn   = document.getElementById('restartBtn');
  targetChip   = document.getElementById('target-chip');
  dialogueArea = document.getElementById('dialogue-area');
  optionsArea  = document.getElementById('options-area');
  scoreText    = document.getElementById('score-text');
  scoreBarInner= document.getElementById('score-bar-inner');
  resultModal  = document.getElementById('result-modal');
  strikeBadge  = document.getElementById('strike-badge');
  progressText = document.getElementById('progress-text');
  effectsLayer = document.getElementById('effects-layer');
  finalLayer   = document.getElementById('final-layer');
  toast        = document.getElementById('toast');
  replyPop     = document.getElementById('reply-pop');

  // ëŸ°ì²˜ ë²„íŠ¼ ë™ì‘
  if (backBtn) {
    backBtn.onclick = () => {
      resetAll();
      gameRoot.classList.add('hidden');
      launcher.classList.remove('hidden');
      window.scrollTo({top:0,behavior:'smooth'});
    };
  }
  if (restartBtn) {
    restartBtn.onclick = () => {
      resultModal.classList.add('hidden');
      gameRoot.classList.add('hidden');
      launcher.classList.remove('hidden');
      targetMbti = null;
      resetAll();
      window.scrollTo({top:0, behavior:'smooth'});
    };
  }

  // ì´ˆê¸° ê°€ì‹œì„±
  if (launcher) launcher.classList.remove('hidden');
  if (gameRoot) gameRoot.classList.add('hidden');

  // ëŸ°ì²˜ êµ¬ì„±
  buildLauncher();
  // ===== ëª¨ë°”ì¼ ì˜¤ë””ì˜¤ í•´ì œ ì „ì—­ ë°”ì¸ë”© =====
function bindAudioUnlock(){
  let done = false;
  const tryUnlock = () => {
    if (done) return;
    done = true;
    try { AudioKit.resume(); AudioKit.prime(); } catch(_) {}
    ['touchstart','pointerdown','click'].forEach(t=>{
      document.removeEventListener(t, tryUnlock, true);
    });
  };
  ['touchstart','pointerdown','click'].forEach(t=>{
    document.addEventListener(t, tryUnlock, true);
  });
}
document.addEventListener('DOMContentLoaded', bindAudioUnlock);

});
  </script>
</body>
</html>
